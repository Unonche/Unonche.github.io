import{D as ct,u as H,f as dt,y as R,z as D,v as L,a as N,N as ei,M as O,Y as Ei,w as Tt,R as J,o as le,E as Y,P as lt,Z as Gi,h as ii,B as bt,_ as Ri,$ as Di,n as Ce,J as Q,Q as Wi}from"./index.Dcq1LWku.js";const Ut=Object.create(null),ve=Object.create(null);function ue(r,t){let e=ve[r];return e===void 0&&(Ut[t]===void 0&&(Ut[t]=1),ve[r]=e=Ut[t]++),e}let at;function si(){return(!at||at!=null&&at.isContextLost())&&(at=ct.get().createCanvas().getContext("webgl",{})),at}let zt;function Li(){if(!zt){zt="mediump";const r=si();r&&r.getShaderPrecisionFormat&&(zt=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision?"highp":"mediump")}return zt}function $i(r,t,e){return t?r:e?(r=r.replace("out vec4 finalColor;",""),`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${r}
        `):`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${r}
        `}function Vi(r,t,e){const i=e?t.maxSupportedFragmentPrecision:t.maxSupportedVertexPrecision;if(r.substring(0,9)!=="precision"){let s=e?t.requestedFragmentPrecision:t.requestedVertexPrecision;return s==="highp"&&i!=="highp"&&(s="mediump"),`precision ${s} float;
${r}`}else if(i!=="highp"&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}function Ui(r,t){return t?`#version 300 es
${r}`:r}const Hi={},Ni={};function ji(r,{name:t="pixi-program"},e=!0){t=t.replace(/\s+/g,"-"),t+=e?"-fragment":"-vertex";const i=e?Hi:Ni;return i[t]?(i[t]++,t+=`-${i[t]}`):i[t]=1,r.indexOf("#define SHADER_NAME")!==-1?r:`${`#define SHADER_NAME ${t}`}
${r}`}function qi(r,t){return t?r.replace("#version 300 es",""):r}const Ht={stripVersion:qi,ensurePrecision:Vi,addProgramDefines:$i,setProgramName:ji,insertVersion:Ui},Nt=Object.create(null),ri=class ee{constructor(t){t={...ee.defaultOptions,...t};const e=t.fragment.indexOf("#version 300 es")!==-1,i={stripVersion:e,ensurePrecision:{requestedFragmentPrecision:t.preferredFragmentPrecision,requestedVertexPrecision:t.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:Li()},setProgramName:{name:t.name},addProgramDefines:e,insertVersion:e};let s=t.fragment,n=t.vertex;Object.keys(Ht).forEach(a=>{const o=i[a];s=Ht[a](s,o,!0),n=Ht[a](n,o,!1)}),this.fragment=s,this.vertex=n,this._key=ue(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null}static from(t){const e=`${t.vertex}:${t.fragment}`;return Nt[e]||(Nt[e]=new ee(t)),Nt[e]}};ri.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let ni=ri;const Me={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function Oi(r){return Me[r]??Me.float32}const Ki={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function Yi({source:r,entryPoint:t}){const e={},i=r.indexOf(`fn ${t}`);if(i!==-1){const s=r.indexOf("->",i);if(s!==-1){const n=r.substring(i,s),a=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let o;for(;(o=a.exec(n))!==null;){const c=Ki[o[3]]??"float32";e[o[2]]={location:parseInt(o[1],10),format:c,stride:Oi(c).stride,offset:0,instance:!1,start:0}}}}return e}function jt(r){var u,m;const t=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,e=/@group\((\d+)\)/,i=/@binding\((\d+)\)/,s=/var(<[^>]+>)? (\w+)/,n=/:\s*(\w+)/,a=/struct\s+(\w+)\s*{([^}]+)}/g,o=/(\w+)\s*:\s*([\w\<\>]+)/g,c=/struct\s+(\w+)/,l=(u=r.match(t))==null?void 0:u.map(d=>({group:parseInt(d.match(e)[1],10),binding:parseInt(d.match(i)[1],10),name:d.match(s)[2],isUniform:d.match(s)[1]==="<uniform>",type:d.match(n)[1]}));if(!l)return{groups:[],structs:[]};const h=((m=r.match(a))==null?void 0:m.map(d=>{const g=d.match(c)[1],p=d.match(o).reduce((f,y)=>{const[x,b]=y.split(":");return f[x.trim()]=b.trim(),f},{});return p?{name:g,members:p}:null}).filter(({name:d})=>l.some(g=>g.type===d)))??[];return{groups:l,structs:h}}var _t=(r=>(r[r.VERTEX=1]="VERTEX",r[r.FRAGMENT=2]="FRAGMENT",r[r.COMPUTE=4]="COMPUTE",r))(_t||{});function Xi({groups:r}){const t=[];for(let e=0;e<r.length;e++){const i=r[e];t[i.group]||(t[i.group]=[]),i.isUniform?t[i.group].push({binding:i.binding,visibility:_t.VERTEX|_t.FRAGMENT,buffer:{type:"uniform"}}):i.type==="sampler"?t[i.group].push({binding:i.binding,visibility:_t.FRAGMENT,sampler:{type:"filtering"}}):i.type==="texture_2d"&&t[i.group].push({binding:i.binding,visibility:_t.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return t}function Qi({groups:r}){const t=[];for(let e=0;e<r.length;e++){const i=r[e];t[i.group]||(t[i.group]={}),t[i.group][i.name]=i.binding}return t}function Zi(r,t){const e=new Set,i=new Set,s=[...r.structs,...t.structs].filter(a=>e.has(a.name)?!1:(e.add(a.name),!0)),n=[...r.groups,...t.groups].filter(a=>{const o=`${a.name}-${a.binding}`;return i.has(o)?!1:(i.add(o),!0)});return{structs:s,groups:n}}const qt=Object.create(null);class Wt{constructor(t){var o,c;this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:e,vertex:i,layout:s,gpuLayout:n,name:a}=t;if(this.name=a,this.fragment=e,this.vertex=i,e.source===i.source){const l=jt(e.source);this.structsAndGroups=l}else{const l=jt(i.source),h=jt(e.source);this.structsAndGroups=Zi(l,h)}this.layout=s??Qi(this.structsAndGroups),this.gpuLayout=n??Xi(this.structsAndGroups),this.autoAssignGlobalUniforms=((o=this.layout[0])==null?void 0:o.globalUniforms)!==void 0,this.autoAssignLocalUniforms=((c=this.layout[1])==null?void 0:c.localUniforms)!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:t,fragment:e}=this,i=t.source+e.source+t.entryPoint+e.entryPoint;this._layoutKey=ue(i,"program")}get attributeData(){return this._attributeData??(this._attributeData=Yi(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null}static from(t){const e=`${t.vertex.source}:${t.fragment.source}:${t.fragment.entryPoint}:${t.vertex.entryPoint}`;return qt[e]||(qt[e]=new Wt(t)),qt[e]}}const ai=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>"],Ji=ai.reduce((r,t)=>(r[t]=!0,r),{});function ts(r,t){switch(r){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*t);case"vec3<f32>":return new Float32Array(3*t);case"vec4<f32>":return new Float32Array(4*t);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const oi=class hi{constructor(t,e){this._touched=0,this.uid=H("uniform"),this._resourceType="uniformGroup",this._resourceId=H("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,e={...hi.defaultOptions,...e},this.uniformStructures=t;const i={};for(const s in t){const n=t[s];if(n.name=s,n.size=n.size??1,!Ji[n.type])throw new Error(`Uniform type ${n.type} is not supported. Supported uniform types are: ${ai.join(", ")}`);n.value??(n.value=ts(n.type,n.size)),i[s]=n.value}this.uniforms=i,this._dirtyId=1,this.ubo=e.ubo,this.isStatic=e.isStatic,this._signature=ue(Object.keys(i).map(s=>`${s}-${t[s].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};oi.defaultOptions={ubo:!1,isStatic:!1};let ci=oi;class Gt{constructor(t){this.resources=Object.create(null),this._dirty=!0;let e=0;for(const i in t){const s=t[i];this.setResource(s,e++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const t=[];let e=0;for(const i in this.resources)t[e++]=this.resources[i]._resourceId;this._key=t.join("|")}setResource(t,e){var s,n;const i=this.resources[e];t!==i&&(i&&((s=t.off)==null||s.call(t,"change",this.onResourceChange,this)),(n=t.on)==null||n.call(t,"change",this.onResourceChange,this),this.resources[e]=t,this._dirty=!0)}getResource(t){return this.resources[t]}_touch(t){const e=this.resources;for(const i in e)e[i]._touched=t}destroy(){var e;const t=this.resources;for(const i in t){const s=t[i];(e=s.off)==null||e.call(s,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(t){if(this._dirty=!0,t.destroyed){const e=this.resources;for(const i in e)e[i]===t&&(e[i]=null)}else this._updateKey()}}var ie=(r=>(r[r.WEBGL=1]="WEBGL",r[r.WEBGPU=2]="WEBGPU",r[r.BOTH=3]="BOTH",r))(ie||{});class de extends dt{constructor(t){super(),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[];let{gpuProgram:e,glProgram:i,groups:s,resources:n,compatibleRenderers:a,groupMap:o}=t;this.gpuProgram=e,this.glProgram=i,a===void 0&&(a=0,e&&(a|=ie.WEBGPU),i&&(a|=ie.WEBGL)),this.compatibleRenderers=a;const c={};if(!n&&!s&&(n={}),n&&s)throw new Error("[Shader] Cannot have both resources and groups");if(!e&&s&&!o)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!e&&s&&o)for(const l in o)for(const h in o[l]){const u=o[l][h];c[u]={group:l,binding:h,name:u}}else if(e&&s&&!o){const l=e.structsAndGroups.groups;o={},l.forEach(h=>{o[h.group]=o[h.group]||{},o[h.group][h.binding]=h.name,c[h.name]=h})}else if(n){s={},o={},e&&e.structsAndGroups.groups.forEach(u=>{o[u.group]=o[u.group]||{},o[u.group][u.binding]=u.name,c[u.name]=u});let l=0;for(const h in n)c[h]||(s[99]||(s[99]=new Gt,this._ownedBindGroups.push(s[99])),c[h]={group:99,binding:l,name:h},o[99]=o[99]||{},o[99][l]=h,l++);for(const h in n){const u=h;let m=n[h];!m.source&&!m._resourceType&&(m=new ci(m));const d=c[u];d&&(s[d.group]||(s[d.group]=new Gt,this._ownedBindGroups.push(s[d.group])),s[d.group].setResource(m,d.binding))}}this.groups=s,this._uniformBindMap=o,this.resources=this._buildResourceAccessor(s,c)}addResource(t,e,i){var s,n;(s=this._uniformBindMap)[e]||(s[e]={}),(n=this._uniformBindMap[e])[i]||(n[i]=t),this.groups[e]||(this.groups[e]=new Gt,this._ownedBindGroups.push(this.groups[e]))}_buildResourceAccessor(t,e){const i={};for(const s in e){const n=e[s];Object.defineProperty(i,n.name,{get(){return t[n.group].getResource(n.binding)},set(a){t[n.group].setResource(a,n.binding)}})}return i}destroy(t=!1){var e,i;this.emit("destroy",this),t&&((e=this.gpuProgram)==null||e.destroy(),(i=this.glProgram)==null||i.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(s=>{s.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null}static from(t){const{gpu:e,gl:i,...s}=t;let n,a;return e&&(n=Wt.from(e)),i&&(a=ni.from(i)),new de({gpuProgram:n,glProgram:a,...s})}}class es extends dt{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return R(D,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return R(D,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return R(D,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return R(D,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return R(D,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(t=!1){var e;this.emit("destroy",this),this.removeAllListeners();for(const i in this.chars)(e=this.chars[i].texture)==null||e.destroy();this.chars=null,t&&(this.pages.forEach(i=>i.texture.destroy(!0)),this.pages=null)}}const li=class se{constructor(t,e,i,s){this.uid=H("fillGradient"),this.type="linear",this.gradientStops=[],this._styleKey=null,this.x0=t,this.y0=e,this.x1=i,this.y1=s}addColorStop(t,e){return this.gradientStops.push({offset:t,color:L.shared.setValue(e).toHexa()}),this._styleKey=null,this}buildLinearGradient(){const t=se.defaultTextureSize,{gradientStops:e}=this,i=ct.get().createCanvas();i.width=t,i.height=t;const s=i.getContext("2d"),n=s.createLinearGradient(0,0,se.defaultTextureSize,1);for(let p=0;p<e.length;p++){const f=e[p];n.addColorStop(f.offset,f.color)}s.fillStyle=n,s.fillRect(0,0,t,t),this.texture=new N({source:new ei({resource:i,addressModeU:"clamp-to-edge",addressModeV:"repeat"})});const{x0:a,y0:o,x1:c,y1:l}=this,h=new O,u=c-a,m=l-o,d=Math.sqrt(u*u+m*m),g=Math.atan2(m,u);h.translate(-a,-o),h.scale(1/t,1/t),h.rotate(-g),h.scale(256/d,1),this.transform=h,this._styleKey=null}get styleKey(){if(this._styleKey)return this._styleKey;const t=this.gradientStops.map(s=>`${s.offset}-${s.color}`).join("-"),e=this.texture.uid,i=this.transform.toArray().join("-");return`fill-gradient-${this.uid}-${t}-${e}-${i}-${this.x0}-${this.y0}-${this.x1}-${this.y1}`}};li.defaultTextureSize=256;let Pt=li;const Te={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class Lt{constructor(t,e){this.uid=H("fillPattern"),this.transform=new O,this._styleKey=null,this.texture=t,this.transform.scale(1/t.frame.width,1/t.frame.height),e&&(t.source.style.addressModeU=Te[e].addressModeU,t.source.style.addressModeV=Te[e].addressModeV)}setTransform(t){const e=this.texture;this.transform.copyFrom(t),this.transform.invert(),this.transform.scale(1/e.frame.width,1/e.frame.height),this._styleKey=null}get styleKey(){return this._styleKey?this._styleKey:(this._styleKey=`fill-pattern-${this.uid}-${this.texture.uid}-${this.transform.toArray().join("-")}`,this._styleKey)}}var is=rs,Ot={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},ss=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function rs(r){var t=[];return r.replace(ss,function(e,i,s){var n=i.toLowerCase();for(s=as(s),n=="m"&&s.length>2&&(t.push([i].concat(s.splice(0,2))),n="l",i=i=="m"?"l":"L");;){if(s.length==Ot[n])return s.unshift(i),t.push(s);if(s.length<Ot[n])throw new Error("malformed path data");t.push([i].concat(s.splice(0,Ot[n])))}}),t}var ns=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function as(r){var t=r.match(ns);return t?t.map(Number):[]}const os=Ei(is);function hs(r,t){const e=os(r),i=[];let s=null,n=0,a=0;for(let o=0;o<e.length;o++){const c=e[o],l=c[0],h=c;switch(l){case"M":n=h[1],a=h[2],t.moveTo(n,a);break;case"m":n+=h[1],a+=h[2],t.moveTo(n,a);break;case"H":n=h[1],t.lineTo(n,a);break;case"h":n+=h[1],t.lineTo(n,a);break;case"V":a=h[1],t.lineTo(n,a);break;case"v":a+=h[1],t.lineTo(n,a);break;case"L":n=h[1],a=h[2],t.lineTo(n,a);break;case"l":n+=h[1],a+=h[2],t.lineTo(n,a);break;case"C":n=h[5],a=h[6],t.bezierCurveTo(h[1],h[2],h[3],h[4],n,a);break;case"c":t.bezierCurveTo(n+h[1],a+h[2],n+h[3],a+h[4],n+h[5],a+h[6]),n+=h[5],a+=h[6];break;case"S":n=h[3],a=h[4],t.bezierCurveToShort(h[1],h[2],n,a);break;case"s":t.bezierCurveToShort(n+h[1],a+h[2],n+h[3],a+h[4]),n+=h[3],a+=h[4];break;case"Q":n=h[3],a=h[4],t.quadraticCurveTo(h[1],h[2],n,a);break;case"q":t.quadraticCurveTo(n+h[1],a+h[2],n+h[3],a+h[4]),n+=h[3],a+=h[4];break;case"T":n=h[1],a=h[2],t.quadraticCurveToShort(n,a);break;case"t":n+=h[1],a+=h[2],t.quadraticCurveToShort(n,a);break;case"A":n=h[6],a=h[7],t.arcToSvg(h[1],h[2],h[3],h[4],h[5],n,a);break;case"a":n+=h[6],a+=h[7],t.arcToSvg(h[1],h[2],h[3],h[4],h[5],n,a);break;case"Z":case"z":t.closePath(),i.length>0&&(s=i.pop(),s?(n=s.startX,a=s.startY):(n=0,a=0)),s=null;break;default:Tt(`Unknown SVG path command: ${l}`)}l!=="Z"&&l!=="z"&&s===null&&(s={startX:n,startY:a},i.push(s))}return t}class fe{constructor(t=0,e=0,i=0){this.type="circle",this.x=t,this.y=e,this.radius=i}clone(){return new fe(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const i=this.radius*this.radius;let s=this.x-t,n=this.y-e;return s*=s,n*=n,s+n<=i}strokeContains(t,e,i){if(this.radius===0)return!1;const s=this.x-t,n=this.y-e,a=this.radius,o=i/2,c=Math.sqrt(s*s+n*n);return c<a+o&&c>a-o}getBounds(t){return t=t||new J,t.x=this.x-this.radius,t.y=this.y-this.radius,t.width=this.radius*2,t.height=this.radius*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.radius=t.radius,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class pe{constructor(t=0,e=0,i=0,s=0){this.type="ellipse",this.x=t,this.y=e,this.halfWidth=i,this.halfHeight=s}clone(){return new pe(this.x,this.y,this.halfWidth,this.halfHeight)}contains(t,e){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let i=(t-this.x)/this.halfWidth,s=(e-this.y)/this.halfHeight;return i*=i,s*=s,i+s<=1}strokeContains(t,e,i){const{halfWidth:s,halfHeight:n}=this;if(s<=0||n<=0)return!1;const a=i/2,o=s-a,c=n-a,l=s+a,h=n+a,u=t-this.x,m=e-this.y,d=u*u/(o*o)+m*m/(c*c),g=u*u/(l*l)+m*m/(h*h);return d>1&&g<=1}getBounds(t){return t=t||new J,t.x=this.x-this.halfWidth,t.y=this.y-this.halfHeight,t.width=this.halfWidth*2,t.height=this.halfHeight*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.halfWidth=t.halfWidth,this.halfHeight=t.halfHeight,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function cs(r,t,e,i,s,n){const a=r-e,o=t-i,c=s-e,l=n-i,h=a*c+o*l,u=c*c+l*l;let m=-1;u!==0&&(m=h/u);let d,g;m<0?(d=e,g=i):m>1?(d=s,g=n):(d=e+m*c,g=i+m*l);const p=r-d,f=t-g;return p*p+f*f}class St{constructor(...t){this.type="polygon";let e=Array.isArray(t[0])?t[0]:t;if(typeof e[0]!="number"){const i=[];for(let s=0,n=e.length;s<n;s++)i.push(e[s].x,e[s].y);e=i}this.points=e,this.closePath=!0}clone(){const t=this.points.slice(),e=new St(t);return e.closePath=this.closePath,e}contains(t,e){let i=!1;const s=this.points.length/2;for(let n=0,a=s-1;n<s;a=n++){const o=this.points[n*2],c=this.points[n*2+1],l=this.points[a*2],h=this.points[a*2+1];c>e!=h>e&&t<(l-o)*((e-c)/(h-c))+o&&(i=!i)}return i}strokeContains(t,e,i){const s=i/2,n=s*s,{points:a}=this,o=a.length-(this.closePath?0:2);for(let c=0;c<o;c+=2){const l=a[c],h=a[c+1],u=a[(c+2)%a.length],m=a[(c+3)%a.length];if(cs(t,e,l,h,u,m)<=n)return!0}return!1}getBounds(t){t=t||new J;const e=this.points;let i=1/0,s=-1/0,n=1/0,a=-1/0;for(let o=0,c=e.length;o<c;o+=2){const l=e[o],h=e[o+1];i=l<i?l:i,s=l>s?l:s,n=h<n?h:n,a=h>a?h:a}return t.x=i,t.width=s-i,t.y=n,t.height=a-n,t}copyFrom(t){return this.points=t.points.slice(),this.closePath=t.closePath,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((t,e)=>`${t}, ${e}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}}const Bt=(r,t,e,i,s,n)=>{const a=r-e,o=t-i,c=Math.sqrt(a*a+o*o);return c>=s-n&&c<=s+n};class ge{constructor(t=0,e=0,i=0,s=0,n=20){this.type="roundedRectangle",this.x=t,this.y=e,this.width=i,this.height=s,this.radius=n}getBounds(t){return t=t||new J,t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}clone(){return new ge(this.x,this.y,this.width,this.height,this.radius)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+i&&e<=this.y+this.height-i||t>=this.x+i&&t<=this.x+this.width-i)return!0;let s=t-(this.x+i),n=e-(this.y+i);const a=i*i;if(s*s+n*n<=a||(s=t-(this.x+this.width-i),s*s+n*n<=a)||(n=e-(this.y+this.height-i),s*s+n*n<=a)||(s=t-(this.x+i),s*s+n*n<=a))return!0}return!1}strokeContains(t,e,i){const{x:s,y:n,width:a,height:o,radius:c}=this,l=i/2,h=s+c,u=n+c,m=a-c*2,d=o-c*2,g=s+a,p=n+o;return(t>=s-l&&t<=s+l||t>=g-l&&t<=g+l)&&e>=u&&e<=u+d||(e>=n-l&&e<=n+l||e>=p-l&&e<=p+l)&&t>=h&&t<=h+m?!0:t<h&&e<u&&Bt(t,e,h,u,c,l)||t>g-c&&e<u&&Bt(t,e,g-c,u,c,l)||t>g-c&&e>p-c&&Bt(t,e,g-c,p-c,c,l)||t<h&&e>p-c&&Bt(t,e,h,p-c,c,l)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const ls=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function us(r){let t="";for(let e=0;e<r;++e)e>0&&(t+=`
else `),e<r-1&&(t+=`if(test == ${e}.0){}`);return t}function ds(r,t){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const e=t.createShader(t.FRAGMENT_SHADER);try{for(;;){const i=ls.replace(/%forloop%/gi,us(r));if(t.shaderSource(e,i),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))r=r/2|0;else break}}finally{t.deleteShader(e)}return r}let ot=null;function ui(){var t;if(ot)return ot;const r=si();return ot=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),ot=ds(ot,r),(t=r.getExtension("WEBGL_lose_context"))==null||t.loseContext(),ot}const di={};function fs(r,t){let e=2166136261;for(let i=0;i<t;i++)e^=r[i].uid,e=Math.imul(e,16777619),e>>>=0;return di[e]||ps(r,t,e)}let Kt=0;function ps(r,t,e){const i={};let s=0;Kt||(Kt=ui());for(let a=0;a<Kt;a++){const o=a<t?r[a]:N.EMPTY.source;i[s++]=o.source,i[s++]=o.style}const n=new Gt(i);return di[e]=n,n}class ke{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}function Ae(r,t){const e=r.byteLength/8|0,i=new Float64Array(r,0,e);new Float64Array(t,0,e).set(i);const n=r.byteLength-e*8;if(n>0){const a=new Uint8Array(r,e*8,n);new Uint8Array(t,e*8,n).set(a)}}const gs={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var ms=(r=>(r[r.DISABLED=0]="DISABLED",r[r.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",r[r.MASK_ACTIVE=2]="MASK_ACTIVE",r[r.RENDERING_MASK_REMOVE=3]="RENDERING_MASK_REMOVE",r[r.NONE=4]="NONE",r))(ms||{});function Ie(r,t){return t.alphaMode==="no-premultiply-alpha"&&gs[r]||r}class xs{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let t=0;t<this.count;t++){const e=this.textures[t];this.textures[t]=null,this.ids[e.uid]=null}this.count=0}}class ys{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new xs,this.blendMode="normal",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const fi=[];let re=0;function ze(){return re>0?fi[--re]:new ys}function Be(r){fi[re++]=r}let xt=0;const pi=class Rt{constructor(t={}){this.uid=H("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],Rt.defaultOptions.maxTextures=Rt.defaultOptions.maxTextures??ui(),t={...Rt.defaultOptions,...t};const{maxTextures:e,attributesInitialSize:i,indicesInitialSize:s}=t;this.attributeBuffer=new ke(i*4),this.indexBuffer=new Uint16Array(s),this.maxTextures=e}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let t=0;t<this.batchIndex;t++)Be(this.batches[t]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(t){this._elements[this.elementSize++]=t,t._indexStart=this.indexSize,t._attributeStart=this.attributeSize,t._batcher=this,this.indexSize+=t.indexSize,this.attributeSize+=t.attributeSize*this.vertexSize}checkAndUpdateTexture(t,e){const i=t._batch.textures.ids[e._source.uid];return!i&&i!==0?!1:(t._textureId=i,t.texture=e,!0)}updateElement(t){this.dirty=!0;const e=this.attributeBuffer;t.packAsQuad?this.packQuadAttributes(t,e.float32View,e.uint32View,t._attributeStart,t._textureId):this.packAttributes(t,e.float32View,e.uint32View,t._attributeStart,t._textureId)}break(t){const e=this._elements;if(!e[this.elementStart])return;let i=ze(),s=i.textures;s.clear();const n=e[this.elementStart];let a=Ie(n.blendMode,n.texture._source);this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const o=this.attributeBuffer.float32View,c=this.attributeBuffer.uint32View,l=this.indexBuffer;let h=this._batchIndexSize,u=this._batchIndexStart,m="startBatch";const d=this.maxTextures;for(let g=this.elementStart;g<this.elementSize;++g){const p=e[g];e[g]=null;const y=p.texture._source,x=Ie(p.blendMode,y),b=a!==x;if(y._batchTick===xt&&!b){p._textureId=y._textureBindLocation,h+=p.indexSize,p.packAsQuad?(this.packQuadAttributes(p,o,c,p._attributeStart,p._textureId),this.packQuadIndex(l,p._indexStart,p._attributeStart/this.vertexSize)):(this.packAttributes(p,o,c,p._attributeStart,p._textureId),this.packIndex(p,l,p._indexStart,p._attributeStart/this.vertexSize)),p._batch=i;continue}y._batchTick=xt,(s.count>=d||b)&&(this._finishBatch(i,u,h-u,s,a,t,m),m="renderBatch",u=h,a=x,i=ze(),s=i.textures,s.clear(),++xt),p._textureId=y._textureBindLocation=s.count,s.ids[y.uid]=s.count,s.textures[s.count++]=y,p._batch=i,h+=p.indexSize,p.packAsQuad?(this.packQuadAttributes(p,o,c,p._attributeStart,p._textureId),this.packQuadIndex(l,p._indexStart,p._attributeStart/this.vertexSize)):(this.packAttributes(p,o,c,p._attributeStart,p._textureId),this.packIndex(p,l,p._indexStart,p._attributeStart/this.vertexSize))}s.count>0&&(this._finishBatch(i,u,h-u,s,a,t,m),u=h,++xt),this.elementStart=this.elementSize,this._batchIndexStart=u,this._batchIndexSize=h}_finishBatch(t,e,i,s,n,a,o){t.gpuBindGroup=null,t.bindGroup=null,t.action=o,t.batcher=this,t.textures=s,t.blendMode=n,t.start=e,t.size=i,++xt,this.batches[this.batchIndex++]=t,a.add(t)}finish(t){this.break(t)}ensureAttributeBuffer(t){t*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(t*4)}ensureIndexBuffer(t){t<=this.indexBuffer.length||this._resizeIndexBuffer(t)}_resizeAttributeBuffer(t){const e=Math.max(t,this.attributeBuffer.size*2),i=new ke(e);Ae(this.attributeBuffer.rawBinaryData,i.rawBinaryData),this.attributeBuffer=i}_resizeIndexBuffer(t){const e=this.indexBuffer;let i=Math.max(t,e.length*1.5);i+=i%2;const s=i>65535?new Uint32Array(i):new Uint16Array(i);if(s.BYTES_PER_ELEMENT!==e.BYTES_PER_ELEMENT)for(let n=0;n<e.length;n++)s[n]=e[n];else Ae(e.buffer,s.buffer);this.indexBuffer=s}packQuadIndex(t,e,i){t[e]=i+0,t[e+1]=i+1,t[e+2]=i+2,t[e+3]=i+0,t[e+4]=i+2,t[e+5]=i+3}packIndex(t,e,i,s){const n=t.indices,a=t.indexSize,o=t.indexOffset,c=t.attributeOffset;for(let l=0;l<a;l++)e[i++]=s+n[l+o]-c}destroy(){for(let t=0;t<this.batches.length;t++)Be(this.batches[t]);this.batches=null;for(let t=0;t<this._elements.length;t++)this._elements[t]._batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}};pi.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let _s=pi;var $=(r=>(r[r.MAP_READ=1]="MAP_READ",r[r.MAP_WRITE=2]="MAP_WRITE",r[r.COPY_SRC=4]="COPY_SRC",r[r.COPY_DST=8]="COPY_DST",r[r.INDEX=16]="INDEX",r[r.VERTEX=32]="VERTEX",r[r.UNIFORM=64]="UNIFORM",r[r.STORAGE=128]="STORAGE",r[r.INDIRECT=256]="INDIRECT",r[r.QUERY_RESOLVE=512]="QUERY_RESOLVE",r[r.STATIC=1024]="STATIC",r))($||{});class Ct extends dt{constructor(t){let{data:e,size:i}=t;const{usage:s,label:n,shrinkToFit:a}=t;super(),this.uid=H("buffer"),this._resourceType="buffer",this._resourceId=H("resource"),this._touched=0,this._updateID=1,this.shrinkToFit=!0,this.destroyed=!1,e instanceof Array&&(e=new Float32Array(e)),this._data=e,i=i??(e==null?void 0:e.byteLength);const o=!!e;this.descriptor={size:i,usage:s,mappedAtCreation:o,label:n},this.shrinkToFit=a??!0}get data(){return this._data}set data(t){this.setDataWithSize(t,t.length,!0)}get static(){return!!(this.descriptor.usage&$.STATIC)}set static(t){t?this.descriptor.usage|=$.STATIC:this.descriptor.usage&=~$.STATIC}setDataWithSize(t,e,i){if(this._updateID++,this._updateSize=e*t.BYTES_PER_ELEMENT,this._data===t){i&&this.emit("update",this);return}const s=this._data;if(this._data=t,s.length!==t.length){!this.shrinkToFit&&t.byteLength<s.byteLength?i&&this.emit("update",this):(this.descriptor.size=t.byteLength,this._resourceId=H("resource"),this.emit("change",this));return}i&&this.emit("update",this)}update(t){this._updateSize=t??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function gi(r,t){if(!(r instanceof Ct)){let e=t?$.INDEX:$.VERTEX;r instanceof Array&&(t?(r=new Uint32Array(r),e=$.INDEX|$.COPY_DST):(r=new Float32Array(r),e=$.VERTEX|$.COPY_DST)),r=new Ct({data:r,label:t?"index-mesh-buffer":"vertex-mesh-buffer",usage:e})}return r}function bs(r,t,e){const i=r.getAttribute(t);if(!i)return e.minX=0,e.minY=0,e.maxX=0,e.maxY=0,e;const s=i.buffer.data;let n=1/0,a=1/0,o=-1/0,c=-1/0;const l=s.BYTES_PER_ELEMENT,h=(i.offset||0)/l,u=(i.stride||2*4)/l;for(let m=h;m<s.length;m+=u){const d=s[m],g=s[m+1];d>o&&(o=d),g>c&&(c=g),d<n&&(n=d),g<a&&(a=g)}return e.minX=n,e.minY=a,e.maxX=o,e.maxY=c,e}function Ss(r){return(r instanceof Ct||Array.isArray(r)||r.BYTES_PER_ELEMENT)&&(r={buffer:r}),r.buffer=gi(r.buffer,!1),r}class ws extends dt{constructor(t){const{attributes:e,indexBuffer:i,topology:s}=t;super(),this.uid=H("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new le,this._boundsDirty=!0,this.attributes=e,this.buffers=[],this.instanceCount=t.instanceCount||1;for(const n in e){const a=e[n]=Ss(e[n]);this.buffers.indexOf(a.buffer)===-1&&(this.buffers.push(a.buffer),a.buffer.on("update",this.onBufferUpdate,this),a.buffer.on("change",this.onBufferUpdate,this))}i&&(this.indexBuffer=gi(i,!0),this.buffers.push(this.indexBuffer)),this.topology=s||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(t){return this.attributes[t]}getIndex(){return this.indexBuffer}getBuffer(t){return this.getAttribute(t).buffer}getSize(){for(const t in this.attributes){const e=this.attributes[t];return e.buffer.data.length/(e.stride/4||e.size)}return 0}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,bs(this,"aPosition",this._bounds)):this._bounds}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners(),t&&this.buffers.forEach(e=>e.destroy()),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const Ps=new Float32Array(1),Cs=new Uint32Array(1);class vs extends ws{constructor(){const e=new Ct({data:Ps,label:"attribute-batch-buffer",usage:$.VERTEX|$.COPY_DST,shrinkToFit:!1}),i=new Ct({data:Cs,label:"index-batch-buffer",usage:$.INDEX|$.COPY_DST,shrinkToFit:!1}),s=6*4;super({attributes:{aPosition:{buffer:e,format:"float32x2",stride:s,offset:0},aUV:{buffer:e,format:"float32x2",stride:s,offset:2*4},aColor:{buffer:e,format:"unorm8x4",stride:s,offset:4*4},aTextureIdAndRound:{buffer:e,format:"uint16x2",stride:s,offset:5*4}},indexBuffer:i})}}function Fe(r,t,e){if(r)for(const i in r){const s=i.toLocaleLowerCase(),n=t[s];if(n){let a=r[i];i==="header"&&(a=a.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),e&&n.push(`//----${e}----//`),n.push(a)}else Tt(`${i} placement hook does not exist in shader`)}}const Ms=/\{\{(.*?)\}\}/g;function Ee(r){var i;const t={};return(((i=r.match(Ms))==null?void 0:i.map(s=>s.replace(/[{()}]/g,"")))??[]).forEach(s=>{t[s]=[]}),t}function Ge(r,t){let e;const i=/@in\s+([^;]+);/g;for(;(e=i.exec(r))!==null;)t.push(e[1])}function Re(r,t,e=!1){const i=[];Ge(t,i),r.forEach(o=>{o.header&&Ge(o.header,i)});const s=i;e&&s.sort();const n=s.map((o,c)=>`       @location(${c}) ${o},`).join(`
`);let a=t.replace(/@in\s+[^;]+;\s*/g,"");return a=a.replace("{{in}}",`
${n}
`),a}function De(r,t){let e;const i=/@out\s+([^;]+);/g;for(;(e=i.exec(r))!==null;)t.push(e[1])}function Ts(r){const e=/\b(\w+)\s*:/g.exec(r);return e?e[1]:""}function ks(r){const t=/@.*?\s+/g;return r.replace(t,"")}function As(r,t){const e=[];De(t,e),r.forEach(c=>{c.header&&De(c.header,e)});let i=0;const s=e.sort().map(c=>c.indexOf("builtin")>-1?c:`@location(${i++}) ${c}`).join(`,
`),n=e.sort().map(c=>`       var ${ks(c)};`).join(`
`),a=`return VSOutput(
                ${e.sort().map(c=>` ${Ts(c)}`).join(`,
`)});`;let o=t.replace(/@out\s+[^;]+;\s*/g,"");return o=o.replace("{{struct}}",`
${s}
`),o=o.replace("{{start}}",`
${n}
`),o=o.replace("{{return}}",`
${a}
`),o}function We(r,t){let e=r;for(const i in t){const s=t[i];s.join(`
`).length?e=e.replace(`{{${i}}}`,`//-----${i} START-----//
${s.join(`
`)}
//----${i} FINISH----//`):e=e.replace(`{{${i}}}`,"")}return e}const Z=Object.create(null),Yt=new Map;let Is=0;function zs({template:r,bits:t}){const e=mi(r,t);if(Z[e])return Z[e];const{vertex:i,fragment:s}=Fs(r,t);return Z[e]=xi(i,s,t),Z[e]}function Bs({template:r,bits:t}){const e=mi(r,t);return Z[e]||(Z[e]=xi(r.vertex,r.fragment,t)),Z[e]}function Fs(r,t){const e=t.map(a=>a.vertex).filter(a=>!!a),i=t.map(a=>a.fragment).filter(a=>!!a);let s=Re(e,r.vertex,!0);s=As(e,s);const n=Re(i,r.fragment,!0);return{vertex:s,fragment:n}}function mi(r,t){return t.map(e=>(Yt.has(e)||Yt.set(e,Is++),Yt.get(e))).sort((e,i)=>e-i).join("-")+r.vertex+r.fragment}function xi(r,t,e){const i=Ee(r),s=Ee(t);return e.forEach(n=>{Fe(n.vertex,i,n.name),Fe(n.fragment,s,n.name)}),{vertex:We(r,i),fragment:We(t,s)}}const Es=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}
        
        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);
       
        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,Gs=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;
   
    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {
        
        {{start}}

        var outColor:vec4<f32>;
      
        {{main}}
        
        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,Rs=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;
        
        {{start}}
        
        vColor = vec4(1.);
        
        {{main}}
        
        vUV = uv;
        
        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,Ds=`
   
    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {
        
        {{start}}

        vec4 outColor;
      
        {{main}}
        
        finalColor = outColor * vColor;
        
        {{end}}
    }
`,Ws={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},Ls={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function $s({bits:r,name:t}){const e=zs({template:{fragment:Gs,vertex:Es},bits:[Ws,...r]});return Wt.from({name:t,vertex:{source:e.vertex,entryPoint:"main"},fragment:{source:e.fragment,entryPoint:"main"}})}function Vs({bits:r,name:t}){return new ni({name:t,...Bs({template:{vertex:Rs,fragment:Ds},bits:[Ls,...r]})})}const Us={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},Hs={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},Xt={};function Ns(r){const t=[];if(r===1)t.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),t.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let e=0;for(let i=0;i<r;i++)t.push(`@group(1) @binding(${e++}) var textureSource${i+1}: texture_2d<f32>;`),t.push(`@group(1) @binding(${e++}) var textureSampler${i+1}: sampler;`)}return t.join(`
`)}function js(r){const t=[];if(r===1)t.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{t.push("switch vTextureId {");for(let e=0;e<r;e++)e===r-1?t.push("  default:{"):t.push(`  case ${e}:{`),t.push(`      outColor = textureSampleGrad(textureSource${e+1}, textureSampler${e+1}, vUV, uvDx, uvDy);`),t.push("      break;}");t.push("}")}return t.join(`
`)}function qs(r){return Xt[r]||(Xt[r]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${Ns(r)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${js(r)}
            `}}),Xt[r]}const Qt={};function Os(r){const t=[];for(let e=0;e<r;e++)e>0&&t.push("else"),e<r-1&&t.push(`if(vTextureId < ${e}.5)`),t.push("{"),t.push(`	outColor = texture(uTextures[${e}], vUV);`),t.push("}");return t.join(`
`)}function Ks(r){return Qt[r]||(Qt[r]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${r}];

            `,main:`

                ${Os(r)}
            `}}),Qt[r]}const Ys={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32> 
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},Xs={name:"round-pixels-bit",vertex:{header:`   
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {       
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},Le={};function Qs(r){let t=Le[r];if(t)return t;const e=new Int32Array(r);for(let i=0;i<r;i++)e[i]=i;return t=Le[r]=new ci({uTextures:{value:e,type:"i32",size:r}},{isStatic:!0}),t}class Zs extends de{constructor(t){const e=Vs({name:"batch",bits:[Hs,Ks(t),Xs]}),i=$s({name:"batch",bits:[Us,qs(t),Ys]});super({glProgram:e,gpuProgram:i,resources:{batchSamplers:Qs(t)}})}}let $e=null;const yi=class _i extends _s{constructor(){super(...arguments),this.geometry=new vs,this.shader=$e||($e=new Zs(this.maxTextures)),this.name=_i.extension.name,this.vertexSize=6}packAttributes(t,e,i,s,n){const a=n<<16|t.roundPixels&65535,o=t.transform,c=o.a,l=o.b,h=o.c,u=o.d,m=o.tx,d=o.ty,{positions:g,uvs:p}=t,f=t.color,y=t.attributeOffset,x=y+t.attributeSize;for(let b=y;b<x;b++){const _=b*2,P=g[_],z=g[_+1];e[s++]=c*P+h*z+m,e[s++]=u*z+l*P+d,e[s++]=p[_],e[s++]=p[_+1],i[s++]=f,i[s++]=a}}packQuadAttributes(t,e,i,s,n){const a=t.texture,o=t.transform,c=o.a,l=o.b,h=o.c,u=o.d,m=o.tx,d=o.ty,g=t.bounds,p=g.maxX,f=g.minX,y=g.maxY,x=g.minY,b=a.uvs,_=t.color,P=n<<16|t.roundPixels&65535;e[s+0]=c*f+h*x+m,e[s+1]=u*x+l*f+d,e[s+2]=b.x0,e[s+3]=b.y0,i[s+4]=_,i[s+5]=P,e[s+6]=c*p+h*x+m,e[s+7]=u*x+l*p+d,e[s+8]=b.x1,e[s+9]=b.y1,i[s+10]=_,i[s+11]=P,e[s+12]=c*p+h*y+m,e[s+13]=u*y+l*p+d,e[s+14]=b.x2,e[s+15]=b.y2,i[s+16]=_,i[s+17]=P,e[s+18]=c*f+h*y+m,e[s+19]=u*y+l*f+d,e[s+20]=b.x3,e[s+21]=b.y3,i[s+22]=_,i[s+23]=P}};yi.extension={type:[Y.Batcher],name:"default"};let Js=yi;function tr(r,t,e,i,s,n,a,o=null){let c=0;e*=t,s*=n;const l=o.a,h=o.b,u=o.c,m=o.d,d=o.tx,g=o.ty;for(;c<a;){const p=r[e],f=r[e+1];i[s]=l*p+u*f+d,i[s+1]=h*p+m*f+g,s+=n,e+=t,c++}}function er(r,t,e,i){let s=0;for(t*=e;s<i;)r[t]=0,r[t+1]=0,t+=e,s++}function bi(r,t,e,i,s){const n=t.a,a=t.b,o=t.c,c=t.d,l=t.tx,h=t.ty;e=e||0,i=i||2,s=s||r.length/i-e;let u=e*i;for(let m=0;m<s;m++){const d=r[u],g=r[u+1];r[u]=n*d+o*g+l,r[u+1]=a*d+c*g+h,u+=i}}function ir(r,t){if(r===16777215||!t)return t;if(t===16777215||!r)return r;const e=r>>16&255,i=r>>8&255,s=r&255,n=t>>16&255,a=t>>8&255,o=t&255,c=e*n/255,l=i*a/255,h=s*o/255;return(c<<16)+(l<<8)+h}const sr=new O;class Si{constructor(){this.packAsQuad=!1,this.batcherName="default",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const t=this.baseColor,e=t>>16|t&65280|(t&255)<<16,i=this.renderable;return i?ir(e,i.groupColor)+(this.alpha*i.groupAlpha*255<<24):e+(this.alpha*255<<24)}get transform(){var t;return((t=this.renderable)==null?void 0:t.groupTransform)||sr}copyTo(t){t.indexOffset=this.indexOffset,t.indexSize=this.indexSize,t.attributeOffset=this.attributeOffset,t.attributeSize=this.attributeSize,t.baseColor=this.baseColor,t.alpha=this.alpha,t.texture=this.texture,t.geometryData=this.geometryData}reset(){this.applyTransform=!0,this.renderable=null}}const vt={extension:{type:Y.ShapeBuilder,name:"circle"},build(r,t){let e,i,s,n,a,o;if(r.type==="circle"){const _=r;e=_.x,i=_.y,a=o=_.radius,s=n=0}else if(r.type==="ellipse"){const _=r;e=_.x,i=_.y,a=_.halfWidth,o=_.halfHeight,s=n=0}else{const _=r,P=_.width/2,z=_.height/2;e=_.x+P,i=_.y+z,a=o=Math.max(0,Math.min(_.radius,Math.min(P,z))),s=P-a,n=z-o}if(!(a>=0&&o>=0&&s>=0&&n>=0))return t;const c=Math.ceil(2.3*Math.sqrt(a+o)),l=c*8+(s?4:0)+(n?4:0);if(l===0)return t;if(c===0)return t[0]=t[6]=e+s,t[1]=t[3]=i+n,t[2]=t[4]=e-s,t[5]=t[7]=i-n,t;let h=0,u=c*4+(s?2:0)+2,m=u,d=l,g=s+a,p=n,f=e+g,y=e-g,x=i+p;if(t[h++]=f,t[h++]=x,t[--u]=x,t[--u]=y,n){const _=i-p;t[m++]=y,t[m++]=_,t[--d]=_,t[--d]=f}for(let _=1;_<c;_++){const P=Math.PI/2*(_/c),z=s+Math.cos(P)*a,v=n+Math.sin(P)*o,M=e+z,S=e-z,w=i+v,E=i-v;t[h++]=M,t[h++]=w,t[--u]=w,t[--u]=S,t[m++]=S,t[m++]=E,t[--d]=E,t[--d]=M}g=s,p=n+o,f=e+g,y=e-g,x=i+p;const b=i-p;return t[h++]=f,t[h++]=x,t[--d]=b,t[--d]=f,s&&(t[h++]=y,t[h++]=x,t[--d]=b,t[--d]=y),t},triangulate(r,t,e,i,s,n){if(r.length===0)return;let a=0,o=0;for(let h=0;h<r.length;h+=2)a+=r[h],o+=r[h+1];a/=r.length/2,o/=r.length/2;let c=i;t[c*e]=a,t[c*e+1]=o;const l=c++;for(let h=0;h<r.length;h+=2)t[c*e]=r[h],t[c*e+1]=r[h+1],h>0&&(s[n++]=c,s[n++]=l,s[n++]=c-1),c++;s[n++]=l+1,s[n++]=l,s[n++]=c-1}},rr={...vt,extension:{...vt.extension,name:"ellipse"}},nr={...vt,extension:{...vt.extension,name:"roundedRectangle"}},ar=1e-4,Ve=1e-4;function or(r){const t=r.length;if(t<6)return 1;let e=0;for(let i=0,s=r[t-2],n=r[t-1];i<t;i+=2){const a=r[i],o=r[i+1];e+=(a-s)*(o+n),s=a,n=o}return e<0?-1:1}function Ue(r,t,e,i,s,n,a,o){const c=r-e*s,l=t-i*s,h=r+e*n,u=t+i*n;let m,d;a?(m=i,d=-e):(m=-i,d=e);const g=c+m,p=l+d,f=h+m,y=u+d;return o.push(g,p),o.push(f,y),2}function rt(r,t,e,i,s,n,a,o){const c=e-r,l=i-t;let h=Math.atan2(c,l),u=Math.atan2(s-r,n-t);o&&h<u?h+=Math.PI*2:!o&&h>u&&(u+=Math.PI*2);let m=h;const d=u-h,g=Math.abs(d),p=Math.sqrt(c*c+l*l),f=(15*g*Math.sqrt(p)/Math.PI>>0)+1,y=d/f;if(m+=y,o){a.push(r,t),a.push(e,i);for(let x=1,b=m;x<f;x++,b+=y)a.push(r,t),a.push(r+Math.sin(b)*p,t+Math.cos(b)*p);a.push(r,t),a.push(s,n)}else{a.push(e,i),a.push(r,t);for(let x=1,b=m;x<f;x++,b+=y)a.push(r+Math.sin(b)*p,t+Math.cos(b)*p),a.push(r,t);a.push(s,n),a.push(r,t)}return f*2}function hr(r,t,e,i,s,n,a,o,c){const l=ar;if(r.length===0)return;const h=t;let u=h.alignment;if(t.alignment!==.5){let B=or(r);u=(u-.5)*B+.5}const m=new lt(r[0],r[1]),d=new lt(r[r.length-2],r[r.length-1]),g=i,p=Math.abs(m.x-d.x)<l&&Math.abs(m.y-d.y)<l;if(g){r=r.slice(),p&&(r.pop(),r.pop(),d.set(r[r.length-2],r[r.length-1]));const B=(m.x+d.x)*.5,X=(d.y+m.y)*.5;r.unshift(B,X),r.push(B,X)}const f=s,y=r.length/2;let x=r.length;const b=f.length/2,_=h.width/2,P=_*_,z=h.miterLimit*h.miterLimit;let v=r[0],M=r[1],S=r[2],w=r[3],E=0,K=0,A=-(M-w),k=v-S,F=0,G=0,V=Math.sqrt(A*A+k*k);A/=V,k/=V,A*=_,k*=_;const _e=u,T=(1-_e)*2,I=_e*2;g||(h.cap==="round"?x+=rt(v-A*(T-I)*.5,M-k*(T-I)*.5,v-A*T,M-k*T,v+A*I,M+k*I,f,!0)+2:h.cap==="square"&&(x+=Ue(v,M,A,k,T,I,!0,f))),f.push(v-A*T,M-k*T),f.push(v+A*I,M+k*I);for(let B=1;B<y-1;++B){v=r[(B-1)*2],M=r[(B-1)*2+1],S=r[B*2],w=r[B*2+1],E=r[(B+1)*2],K=r[(B+1)*2+1],A=-(M-w),k=v-S,V=Math.sqrt(A*A+k*k),A/=V,k/=V,A*=_,k*=_,F=-(w-K),G=S-E,V=Math.sqrt(F*F+G*G),F/=V,G/=V,F*=_,G*=_;const X=S-v,ft=M-w,pt=S-E,gt=K-w,be=X*pt+ft*gt,kt=ft*pt-gt*X,mt=kt<0;if(Math.abs(kt)<.001*Math.abs(be)){f.push(S-A*T,w-k*T),f.push(S+A*I,w+k*I),be>=0&&(h.join==="round"?x+=rt(S,w,S-A*T,w-k*T,S-F*T,w-G*T,f,!1)+4:x+=2,f.push(S-F*I,w-G*I),f.push(S+F*T,w+G*T));continue}const Se=(-A+v)*(-k+w)-(-A+S)*(-k+M),we=(-F+E)*(-G+w)-(-F+S)*(-G+K),At=(X*we-pt*Se)/kt,It=(gt*Se-ft*we)/kt,Vt=(At-S)*(At-S)+(It-w)*(It-w),tt=S+(At-S)*T,et=w+(It-w)*T,it=S-(At-S)*I,st=w-(It-w)*I,Bi=Math.min(X*X+ft*ft,pt*pt+gt*gt),Pe=mt?T:I,Fi=Bi+Pe*Pe*P;Vt<=Fi?h.join==="bevel"||Vt/P>z?(mt?(f.push(tt,et),f.push(S+A*I,w+k*I),f.push(tt,et),f.push(S+F*I,w+G*I)):(f.push(S-A*T,w-k*T),f.push(it,st),f.push(S-F*T,w-G*T),f.push(it,st)),x+=2):h.join==="round"?mt?(f.push(tt,et),f.push(S+A*I,w+k*I),x+=rt(S,w,S+A*I,w+k*I,S+F*I,w+G*I,f,!0)+4,f.push(tt,et),f.push(S+F*I,w+G*I)):(f.push(S-A*T,w-k*T),f.push(it,st),x+=rt(S,w,S-A*T,w-k*T,S-F*T,w-G*T,f,!1)+4,f.push(S-F*T,w-G*T),f.push(it,st)):(f.push(tt,et),f.push(it,st)):(f.push(S-A*T,w-k*T),f.push(S+A*I,w+k*I),h.join==="round"?mt?x+=rt(S,w,S+A*I,w+k*I,S+F*I,w+G*I,f,!0)+2:x+=rt(S,w,S-A*T,w-k*T,S-F*T,w-G*T,f,!1)+2:h.join==="miter"&&Vt/P<=z&&(mt?(f.push(it,st),f.push(it,st)):(f.push(tt,et),f.push(tt,et)),x+=2),f.push(S-F*T,w-G*T),f.push(S+F*I,w+G*I),x+=2)}v=r[(y-2)*2],M=r[(y-2)*2+1],S=r[(y-1)*2],w=r[(y-1)*2+1],A=-(M-w),k=v-S,V=Math.sqrt(A*A+k*k),A/=V,k/=V,A*=_,k*=_,f.push(S-A*T,w-k*T),f.push(S+A*I,w+k*I),g||(h.cap==="round"?x+=rt(S-A*(T-I)*.5,w-k*(T-I)*.5,S-A*T,w-k*T,S+A*I,w+k*I,f,!1)+2:h.cap==="square"&&(x+=Ue(S,w,A,k,T,I,!1,f)));const zi=Ve*Ve;for(let B=b;B<x+b-2;++B)v=f[B*2],M=f[B*2+1],S=f[(B+1)*2],w=f[(B+1)*2+1],E=f[(B+2)*2],K=f[(B+2)*2+1],!(Math.abs(v*(w-K)+S*(K-M)+E*(M-w))<zi)&&o.push(B,B+1,B+2)}function wi(r,t,e,i,s,n,a){const o=Gi(r,t,2);if(!o)return;for(let l=0;l<o.length;l+=3)n[a++]=o[l]+s,n[a++]=o[l+1]+s,n[a++]=o[l+2]+s;let c=s*i;for(let l=0;l<r.length;l+=2)e[c]=r[l],e[c+1]=r[l+1],c+=i}const cr=[],lr={extension:{type:Y.ShapeBuilder,name:"polygon"},build(r,t){for(let e=0;e<r.points.length;e++)t[e]=r.points[e];return t},triangulate(r,t,e,i,s,n){wi(r,cr,t,e,i,s,n)}},ur={extension:{type:Y.ShapeBuilder,name:"rectangle"},build(r,t){const e=r,i=e.x,s=e.y,n=e.width,a=e.height;return n>=0&&a>=0&&(t[0]=i,t[1]=s,t[2]=i+n,t[3]=s,t[4]=i+n,t[5]=s+a,t[6]=i,t[7]=s+a),t},triangulate(r,t,e,i,s,n){let a=0;i*=e,t[i+a]=r[0],t[i+a+1]=r[1],a+=e,t[i+a]=r[2],t[i+a+1]=r[3],a+=e,t[i+a]=r[6],t[i+a+1]=r[7],a+=e,t[i+a]=r[4],t[i+a+1]=r[5],a+=e;const o=i/e;s[n++]=o,s[n++]=o+1,s[n++]=o+2,s[n++]=o+1,s[n++]=o+3,s[n++]=o+2}},dr={extension:{type:Y.ShapeBuilder,name:"triangle"},build(r,t){return t[0]=r.x,t[1]=r.y,t[2]=r.x2,t[3]=r.y2,t[4]=r.x3,t[5]=r.y3,t},triangulate(r,t,e,i,s,n){let a=0;i*=e,t[i+a]=r[0],t[i+a+1]=r[1],a+=e,t[i+a]=r[2],t[i+a+1]=r[3],a+=e,t[i+a]=r[4],t[i+a+1]=r[5];const o=i/e;s[n++]=o,s[n++]=o+1,s[n++]=o+2}},$t={};ii.handleByMap(Y.ShapeBuilder,$t);ii.add(ur,lr,dr,vt,rr,nr);const fr=new J;function pr(r,t){const{geometryData:e,batches:i}=t;i.length=0,e.indices.length=0,e.vertices.length=0,e.uvs.length=0;for(let s=0;s<r.instructions.length;s++){const n=r.instructions[s];if(n.action==="texture")gr(n.data,i,e);else if(n.action==="fill"||n.action==="stroke"){const a=n.action==="stroke",o=n.data.path.shapePath,c=n.data.style,l=n.data.hole;a&&l&&He(l.shapePath,c,null,!0,i,e),He(o,c,l,a,i,e)}}}function gr(r,t,e){const{vertices:i,uvs:s,indices:n}=e,a=n.length,o=i.length/2,c=[],l=$t.rectangle,h=fr,u=r.image;h.x=r.dx,h.y=r.dy,h.width=r.dw,h.height=r.dh;const m=r.transform;l.build(h,c),m&&bi(c,m),l.triangulate(c,i,2,o,n,a);const d=u.uvs;s.push(d.x0,d.y0,d.x1,d.y1,d.x3,d.y3,d.x2,d.y2);const g=bt.get(Si);g.indexOffset=a,g.indexSize=n.length-a,g.attributeOffset=o,g.attributeSize=i.length/2-o,g.baseColor=r.style,g.alpha=r.alpha,g.texture=u,g.geometryData=e,t.push(g)}function He(r,t,e,i,s,n){const{vertices:a,uvs:o,indices:c}=n,l=r.shapePrimitives.length-1;r.shapePrimitives.forEach(({shape:h,transform:u},m)=>{const d=c.length,g=a.length/2,p=[],f=$t[h.type];if(f.build(h,p),u&&bi(p,u),i){const _=h.closePath??!0;hr(p,t,!1,_,a,2,g,c)}else if(e&&l===m){l!==0&&console.warn("[Pixi Graphics] only the last shape have be cut out");const _=[],P=p.slice();mr(e.shapePath).forEach(v=>{_.push(P.length/2),P.push(...v)}),wi(P,_,a,2,g,c,d)}else f.triangulate(p,a,2,g,c,d);const y=o.length/2,x=t.texture;if(x!==N.WHITE){const _=t.matrix;_&&(u&&_.append(u.clone().invert()),tr(a,2,g,o,y,2,a.length/2-g,_))}else er(o,y,2,a.length/2-g);const b=bt.get(Si);b.indexOffset=d,b.indexSize=c.length-d,b.attributeOffset=g,b.attributeSize=a.length/2-g,b.baseColor=t.color,b.alpha=t.alpha,b.texture=x,b.geometryData=n,s.push(b)})}function mr(r){if(!r)return[];const t=r.shapePrimitives,e=[];for(let i=0;i<t.length;i++){const s=t[i].shape,n=[];$t[s.type].build(s,n),e.push(n)}return e}class xr{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class yr{constructor(){this.batcher=new Js,this.instructions=new Ri}init(){this.instructions.reset()}get geometry(){return R(Di,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}}const me=class ne{constructor(){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null)}init(t){ne.defaultOptions.bezierSmoothness=(t==null?void 0:t.bezierSmoothness)??ne.defaultOptions.bezierSmoothness}getContextRenderData(t){return this._graphicsDataContextHash[t.uid]||this._initContextRenderData(t)}updateGpuContext(t){let e=this._gpuContextHash[t.uid]||this._initContext(t);if(t.dirty){e?this._cleanGraphicsContextData(t):e=this._initContext(t),pr(t,e);const i=t.batchMode;t.customShader||i==="no-batch"?e.isBatchable=!1:i==="auto"&&(e.isBatchable=e.geometryData.vertices.length<400),t.dirty=!1}return e}getGpuContext(t){return this._gpuContextHash[t.uid]||this._initContext(t)}_initContextRenderData(t){const e=bt.get(yr),{batches:i,geometryData:s}=this._gpuContextHash[t.uid],n=s.vertices.length,a=s.indices.length;for(let h=0;h<i.length;h++)i[h].applyTransform=!1;const o=e.batcher;o.ensureAttributeBuffer(n),o.ensureIndexBuffer(a),o.begin();for(let h=0;h<i.length;h++){const u=i[h];o.add(u)}o.finish(e.instructions);const c=o.geometry;c.indexBuffer.setDataWithSize(o.indexBuffer,o.indexSize,!0),c.buffers[0].setDataWithSize(o.attributeBuffer.float32View,o.attributeSize,!0);const l=o.batches;for(let h=0;h<l.length;h++){const u=l[h];u.bindGroup=fs(u.textures.textures,u.textures.count)}return this._graphicsDataContextHash[t.uid]=e,e}_initContext(t){const e=new xr;return e.context=t,this._gpuContextHash[t.uid]=e,t.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]}onGraphicsContextDestroy(t){this._cleanGraphicsContextData(t),t.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]=null}_cleanGraphicsContextData(t){const e=this._gpuContextHash[t.uid];e.isBatchable||this._graphicsDataContextHash[t.uid]&&(bt.return(this.getContextRenderData(t)),this._graphicsDataContextHash[t.uid]=null),e.batches&&e.batches.forEach(i=>{bt.return(i)})}destroy(){for(const t in this._gpuContextHash)this._gpuContextHash[t]&&this.onGraphicsContextDestroy(this._gpuContextHash[t].context)}};me.extension={type:[Y.WebGLSystem,Y.WebGPUSystem,Y.CanvasSystem],name:"graphicsContext"};me.defaultOptions={bezierSmoothness:.5};let Pi=me;const _r=8,Ft=11920929e-14,br=1;function Ci(r,t,e,i,s,n,a,o,c,l){const u=Math.min(.99,Math.max(0,l??Pi.defaultOptions.bezierSmoothness));let m=(br-u)/1;return m*=m,Sr(t,e,i,s,n,a,o,c,r,m),r}function Sr(r,t,e,i,s,n,a,o,c,l){ae(r,t,e,i,s,n,a,o,c,l,0),c.push(a,o)}function ae(r,t,e,i,s,n,a,o,c,l,h){if(h>_r)return;const u=(r+e)/2,m=(t+i)/2,d=(e+s)/2,g=(i+n)/2,p=(s+a)/2,f=(n+o)/2,y=(u+d)/2,x=(m+g)/2,b=(d+p)/2,_=(g+f)/2,P=(y+b)/2,z=(x+_)/2;if(h>0){let v=a-r,M=o-t;const S=Math.abs((e-a)*M-(i-o)*v),w=Math.abs((s-a)*M-(n-o)*v);if(S>Ft&&w>Ft){if((S+w)*(S+w)<=l*(v*v+M*M)){c.push(P,z);return}}else if(S>Ft){if(S*S<=l*(v*v+M*M)){c.push(P,z);return}}else if(w>Ft){if(w*w<=l*(v*v+M*M)){c.push(P,z);return}}else if(v=P-(r+a)/2,M=z-(t+o)/2,v*v+M*M<=l){c.push(P,z);return}}ae(r,t,u,m,y,x,P,z,c,l,h+1),ae(P,z,b,_,p,f,a,o,c,l,h+1)}const wr=8,Pr=11920929e-14,Cr=1;function vr(r,t,e,i,s,n,a,o){const l=Math.min(.99,Math.max(0,o??Pi.defaultOptions.bezierSmoothness));let h=(Cr-l)/1;return h*=h,Mr(t,e,i,s,n,a,r,h),r}function Mr(r,t,e,i,s,n,a,o){oe(a,r,t,e,i,s,n,o,0),a.push(s,n)}function oe(r,t,e,i,s,n,a,o,c){if(c>wr)return;const l=(t+i)/2,h=(e+s)/2,u=(i+n)/2,m=(s+a)/2,d=(l+u)/2,g=(h+m)/2;let p=n-t,f=a-e;const y=Math.abs((i-n)*f-(s-a)*p);if(y>Pr){if(y*y<=o*(p*p+f*f)){r.push(d,g);return}}else if(p=d-(t+n)/2,f=g-(e+a)/2,p*p+f*f<=o){r.push(d,g);return}oe(r,t,e,l,h,d,g,o,c+1),oe(r,d,g,u,m,n,a,o,c+1)}function vi(r,t,e,i,s,n,a,o){let c=Math.abs(s-n);(!a&&s>n||a&&n>s)&&(c=2*Math.PI-c),o=o||Math.max(6,Math.floor(6*Math.pow(i,1/3)*(c/Math.PI))),o=Math.max(o,3);let l=c/o,h=s;l*=a?-1:1;for(let u=0;u<o+1;u++){const m=Math.cos(h),d=Math.sin(h),g=t+m*i,p=e+d*i;r.push(g,p),h+=l}}function Tr(r,t,e,i,s,n){const a=r[r.length-2],c=r[r.length-1]-e,l=a-t,h=s-e,u=i-t,m=Math.abs(c*u-l*h);if(m<1e-8||n===0){(r[r.length-2]!==t||r[r.length-1]!==e)&&r.push(t,e);return}const d=c*c+l*l,g=h*h+u*u,p=c*h+l*u,f=n*Math.sqrt(d)/m,y=n*Math.sqrt(g)/m,x=f*p/d,b=y*p/g,_=f*u+y*l,P=f*h+y*c,z=l*(y+x),v=c*(y+x),M=u*(f+b),S=h*(f+b),w=Math.atan2(v-P,z-_),E=Math.atan2(S-P,M-_);vi(r,_+t,P+e,n,w,E,l*h>u*c)}const wt=Math.PI*2,Zt={centerX:0,centerY:0,ang1:0,ang2:0},Jt=({x:r,y:t},e,i,s,n,a,o,c)=>{r*=e,t*=i;const l=s*r-n*t,h=n*r+s*t;return c.x=l+a,c.y=h+o,c};function kr(r,t){const e=t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),i=t===1.5707963267948966?.551915024494:e,s=Math.cos(r),n=Math.sin(r),a=Math.cos(r+t),o=Math.sin(r+t);return[{x:s-n*i,y:n+s*i},{x:a+o*i,y:o-a*i},{x:a,y:o}]}const Ne=(r,t,e,i)=>{const s=r*i-t*e<0?-1:1;let n=r*e+t*i;return n>1&&(n=1),n<-1&&(n=-1),s*Math.acos(n)},Ar=(r,t,e,i,s,n,a,o,c,l,h,u,m)=>{const d=Math.pow(s,2),g=Math.pow(n,2),p=Math.pow(h,2),f=Math.pow(u,2);let y=d*g-d*f-g*p;y<0&&(y=0),y/=d*f+g*p,y=Math.sqrt(y)*(a===o?-1:1);const x=y*s/n*u,b=y*-n/s*h,_=l*x-c*b+(r+e)/2,P=c*x+l*b+(t+i)/2,z=(h-x)/s,v=(u-b)/n,M=(-h-x)/s,S=(-u-b)/n,w=Ne(1,0,z,v);let E=Ne(z,v,M,S);o===0&&E>0&&(E-=wt),o===1&&E<0&&(E+=wt),m.centerX=_,m.centerY=P,m.ang1=w,m.ang2=E};function Ir(r,t,e,i,s,n,a,o=0,c=0,l=0){if(n===0||a===0)return;const h=Math.sin(o*wt/360),u=Math.cos(o*wt/360),m=u*(t-i)/2+h*(e-s)/2,d=-h*(t-i)/2+u*(e-s)/2;if(m===0&&d===0)return;n=Math.abs(n),a=Math.abs(a);const g=Math.pow(m,2)/Math.pow(n,2)+Math.pow(d,2)/Math.pow(a,2);g>1&&(n*=Math.sqrt(g),a*=Math.sqrt(g)),Ar(t,e,i,s,n,a,c,l,h,u,m,d,Zt);let{ang1:p,ang2:f}=Zt;const{centerX:y,centerY:x}=Zt;let b=Math.abs(f)/(wt/4);Math.abs(1-b)<1e-7&&(b=1);const _=Math.max(Math.ceil(b),1);f/=_;let P=r[r.length-2],z=r[r.length-1];const v={x:0,y:0};for(let M=0;M<_;M++){const S=kr(p,f),{x:w,y:E}=Jt(S[0],n,a,u,h,y,x,v),{x:K,y:A}=Jt(S[1],n,a,u,h,y,x,v),{x:k,y:F}=Jt(S[2],n,a,u,h,y,x,v);Ci(r,P,z,w,E,K,A,k,F),P=k,z=F,p+=f}}function zr(r,t,e){const i=(a,o)=>{const c=o.x-a.x,l=o.y-a.y,h=Math.sqrt(c*c+l*l),u=c/h,m=l/h;return{len:h,nx:u,ny:m}},s=(a,o)=>{a===0?r.moveTo(o.x,o.y):r.lineTo(o.x,o.y)};let n=t[t.length-1];for(let a=0;a<t.length;a++){const o=t[a%t.length],c=o.radius??e;if(c<=0){s(a,o),n=o;continue}const l=t[(a+1)%t.length],h=i(o,n),u=i(o,l);if(h.len<1e-4||u.len<1e-4){s(a,o),n=o;continue}let m=Math.asin(h.nx*u.ny-h.ny*u.nx),d=1,g=!1;h.nx*u.nx-h.ny*-u.ny<0?m<0?m=Math.PI+m:(m=Math.PI-m,d=-1,g=!0):m>0&&(d=-1,g=!0);const p=m/2;let f,y=Math.abs(Math.cos(p)*c/Math.sin(p));y>Math.min(h.len/2,u.len/2)?(y=Math.min(h.len/2,u.len/2),f=Math.abs(y*Math.sin(p)/Math.cos(p))):f=c;const x=o.x+u.nx*y+-u.ny*f*d,b=o.y+u.ny*y+u.nx*f*d,_=Math.atan2(h.ny,h.nx)+Math.PI/2*d,P=Math.atan2(u.ny,u.nx)-Math.PI/2*d;a===0&&r.moveTo(x+Math.cos(_)*f,b+Math.sin(_)*f),r.arc(x,b,f,_,P,g),n=o}}function Br(r,t,e,i){const s=(o,c)=>Math.sqrt((o.x-c.x)**2+(o.y-c.y)**2),n=(o,c,l)=>({x:o.x+(c.x-o.x)*l,y:o.y+(c.y-o.y)*l}),a=t.length;for(let o=0;o<a;o++){const c=t[(o+1)%a],l=c.radius??e;if(l<=0){o===0?r.moveTo(c.x,c.y):r.lineTo(c.x,c.y);continue}const h=t[o],u=t[(o+2)%a],m=s(h,c);let d;if(m<1e-4)d=c;else{const f=Math.min(m/2,l);d=n(c,h,f/m)}const g=s(u,c);let p;if(g<1e-4)p=c;else{const f=Math.min(g/2,l);p=n(c,u,f/g)}o===0?r.moveTo(d.x,d.y):r.lineTo(d.x,d.y),r.quadraticCurveTo(c.x,c.y,p.x,p.y,i)}}const Fr=new J;class Er{constructor(t){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new le,this._graphicsPath2D=t}moveTo(t,e){return this.startPoly(t,e),this}lineTo(t,e){this._ensurePoly();const i=this._currentPoly.points,s=i[i.length-2],n=i[i.length-1];return(s!==t||n!==e)&&i.push(t,e),this}arc(t,e,i,s,n,a){this._ensurePoly(!1);const o=this._currentPoly.points;return vi(o,t,e,i,s,n,a),this}arcTo(t,e,i,s,n){this._ensurePoly();const a=this._currentPoly.points;return Tr(a,t,e,i,s,n),this}arcToSvg(t,e,i,s,n,a,o){const c=this._currentPoly.points;return Ir(c,this._currentPoly.lastX,this._currentPoly.lastY,a,o,t,e,i,s,n),this}bezierCurveTo(t,e,i,s,n,a,o){this._ensurePoly();const c=this._currentPoly;return Ci(this._currentPoly.points,c.lastX,c.lastY,t,e,i,s,n,a,o),this}quadraticCurveTo(t,e,i,s,n){this._ensurePoly();const a=this._currentPoly;return vr(this._currentPoly.points,a.lastX,a.lastY,t,e,i,s,n),this}closePath(){return this.endPoly(!0),this}addPath(t,e){this.endPoly(),e&&!e.isIdentity()&&(t=t.clone(!0),t.transform(e));for(let i=0;i<t.instructions.length;i++){const s=t.instructions[i];this[s.action](...s.data)}return this}finish(t=!1){this.endPoly(t)}rect(t,e,i,s,n){return this.drawShape(new J(t,e,i,s),n),this}circle(t,e,i,s){return this.drawShape(new fe(t,e,i),s),this}poly(t,e,i){const s=new St(t);return s.closePath=e,this.drawShape(s,i),this}regularPoly(t,e,i,s,n=0,a){s=Math.max(s|0,3);const o=-1*Math.PI/2+n,c=Math.PI*2/s,l=[];for(let h=0;h<s;h++){const u=h*c+o;l.push(t+i*Math.cos(u),e+i*Math.sin(u))}return this.poly(l,!0,a),this}roundPoly(t,e,i,s,n,a=0,o){if(s=Math.max(s|0,3),n<=0)return this.regularPoly(t,e,i,s,a);const c=i*Math.sin(Math.PI/s)-.001;n=Math.min(n,c);const l=-1*Math.PI/2+a,h=Math.PI*2/s,u=(s-2)*Math.PI/s/2;for(let m=0;m<s;m++){const d=m*h+l,g=t+i*Math.cos(d),p=e+i*Math.sin(d),f=d+Math.PI+u,y=d-Math.PI-u,x=g+n*Math.cos(f),b=p+n*Math.sin(f),_=g+n*Math.cos(y),P=p+n*Math.sin(y);m===0?this.moveTo(x,b):this.lineTo(x,b),this.quadraticCurveTo(g,p,_,P,o)}return this.closePath()}roundShape(t,e,i=!1,s){return t.length<3?this:(i?Br(this,t,e,s):zr(this,t,e),this.closePath())}filletRect(t,e,i,s,n){if(n===0)return this.rect(t,e,i,s);const a=Math.min(i,s)/2,o=Math.min(a,Math.max(-a,n)),c=t+i,l=e+s,h=o<0?-o:0,u=Math.abs(o);return this.moveTo(t,e+u).arcTo(t+h,e+h,t+u,e,u).lineTo(c-u,e).arcTo(c-h,e+h,c,e+u,u).lineTo(c,l-u).arcTo(c-h,l-h,t+i-u,l,u).lineTo(t+u,l).arcTo(t+h,l-h,t,l-u,u).closePath()}chamferRect(t,e,i,s,n,a){if(n<=0)return this.rect(t,e,i,s);const o=Math.min(n,Math.min(i,s)/2),c=t+i,l=e+s,h=[t+o,e,c-o,e,c,e+o,c,l-o,c-o,l,t+o,l,t,l-o,t,e+o];for(let u=h.length-1;u>=2;u-=2)h[u]===h[u-2]&&h[u-1]===h[u-3]&&h.splice(u-1,2);return this.poly(h,!0,a)}ellipse(t,e,i,s,n){return this.drawShape(new pe(t,e,i,s),n),this}roundRect(t,e,i,s,n,a){return this.drawShape(new ge(t,e,i,s,n),a),this}drawShape(t,e){return this.endPoly(),this.shapePrimitives.push({shape:t,transform:e}),this}startPoly(t,e){let i=this._currentPoly;return i&&this.endPoly(),i=new St,i.points.push(t,e),this._currentPoly=i,this}endPoly(t=!1){const e=this._currentPoly;return e&&e.points.length>2&&(e.closePath=t,this.shapePrimitives.push({shape:e})),this._currentPoly=null,this}_ensurePoly(t=!0){if(!this._currentPoly&&(this._currentPoly=new St,t)){const e=this.shapePrimitives[this.shapePrimitives.length-1];if(e){let i=e.shape.x,s=e.shape.y;if(e.transform&&!e.transform.isIdentity()){const n=e.transform,a=i;i=n.a*i+n.c*s+n.tx,s=n.b*a+n.d*s+n.ty}this._currentPoly.points.push(i,s)}else this._currentPoly.points.push(0,0)}}buildPath(){const t=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let e=0;e<t.instructions.length;e++){const i=t.instructions[e];this[i.action](...i.data)}this.finish()}get bounds(){const t=this._bounds;t.clear();const e=this.shapePrimitives;for(let i=0;i<e.length;i++){const s=e[i],n=s.shape.getBounds(Fr);s.transform?t.addRect(n,s.transform):t.addRect(n)}return t}}class ut{constructor(t){this.instructions=[],this.uid=H("graphicsPath"),this._dirty=!0,typeof t=="string"?hs(t,this):this.instructions=(t==null?void 0:t.slice())??[]}get shapePath(){return this._shapePath||(this._shapePath=new Er(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(t,e){return t=t.clone(),this.instructions.push({action:"addPath",data:[t,e]}),this._dirty=!0,this}arc(...t){return this.instructions.push({action:"arc",data:t}),this._dirty=!0,this}arcTo(...t){return this.instructions.push({action:"arcTo",data:t}),this._dirty=!0,this}arcToSvg(...t){return this.instructions.push({action:"arcToSvg",data:t}),this._dirty=!0,this}bezierCurveTo(...t){return this.instructions.push({action:"bezierCurveTo",data:t}),this._dirty=!0,this}bezierCurveToShort(t,e,i,s,n){const a=this.instructions[this.instructions.length-1],o=this.getLastPoint(lt.shared);let c=0,l=0;if(!a||a.action!=="bezierCurveTo")c=o.x,l=o.y;else{c=a.data[2],l=a.data[3];const h=o.x,u=o.y;c=h+(h-c),l=u+(u-l)}return this.instructions.push({action:"bezierCurveTo",data:[c,l,t,e,i,s,n]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...t){return this.instructions.push({action:"ellipse",data:t}),this._dirty=!0,this}lineTo(...t){return this.instructions.push({action:"lineTo",data:t}),this._dirty=!0,this}moveTo(...t){return this.instructions.push({action:"moveTo",data:t}),this}quadraticCurveTo(...t){return this.instructions.push({action:"quadraticCurveTo",data:t}),this._dirty=!0,this}quadraticCurveToShort(t,e,i){const s=this.instructions[this.instructions.length-1],n=this.getLastPoint(lt.shared);let a=0,o=0;if(!s||s.action!=="quadraticCurveTo")a=n.x,o=n.y;else{a=s.data[0],o=s.data[1];const c=n.x,l=n.y;a=c+(c-a),o=l+(l-o)}return this.instructions.push({action:"quadraticCurveTo",data:[a,o,t,e,i]}),this._dirty=!0,this}rect(t,e,i,s,n){return this.instructions.push({action:"rect",data:[t,e,i,s,n]}),this._dirty=!0,this}circle(t,e,i,s){return this.instructions.push({action:"circle",data:[t,e,i,s]}),this._dirty=!0,this}roundRect(...t){return this.instructions.push({action:"roundRect",data:t}),this._dirty=!0,this}poly(...t){return this.instructions.push({action:"poly",data:t}),this._dirty=!0,this}regularPoly(...t){return this.instructions.push({action:"regularPoly",data:t}),this._dirty=!0,this}roundPoly(...t){return this.instructions.push({action:"roundPoly",data:t}),this._dirty=!0,this}roundShape(...t){return this.instructions.push({action:"roundShape",data:t}),this._dirty=!0,this}filletRect(...t){return this.instructions.push({action:"filletRect",data:t}),this._dirty=!0,this}chamferRect(...t){return this.instructions.push({action:"chamferRect",data:t}),this._dirty=!0,this}star(t,e,i,s,n,a,o){n=n||s/2;const c=-1*Math.PI/2+a,l=i*2,h=Math.PI*2/l,u=[];for(let m=0;m<l;m++){const d=m%2?n:s,g=m*h+c;u.push(t+d*Math.cos(g),e+d*Math.sin(g))}return this.poly(u,!0,o),this}clone(t=!1){const e=new ut;if(!t)e.instructions=this.instructions.slice();else for(let i=0;i<this.instructions.length;i++){const s=this.instructions[i];e.instructions.push({action:s.action,data:s.data.slice()})}return e}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(t){if(t.isIdentity())return this;const e=t.a,i=t.b,s=t.c,n=t.d,a=t.tx,o=t.ty;let c=0,l=0,h=0,u=0,m=0,d=0,g=0,p=0;for(let f=0;f<this.instructions.length;f++){const y=this.instructions[f],x=y.data;switch(y.action){case"moveTo":case"lineTo":c=x[0],l=x[1],x[0]=e*c+s*l+a,x[1]=i*c+n*l+o;break;case"bezierCurveTo":h=x[0],u=x[1],m=x[2],d=x[3],c=x[4],l=x[5],x[0]=e*h+s*u+a,x[1]=i*h+n*u+o,x[2]=e*m+s*d+a,x[3]=i*m+n*d+o,x[4]=e*c+s*l+a,x[5]=i*c+n*l+o;break;case"quadraticCurveTo":h=x[0],u=x[1],c=x[2],l=x[3],x[0]=e*h+s*u+a,x[1]=i*h+n*u+o,x[2]=e*c+s*l+a,x[3]=i*c+n*l+o;break;case"arcToSvg":c=x[5],l=x[6],g=x[0],p=x[1],x[0]=e*g+s*p,x[1]=i*g+n*p,x[5]=e*c+s*l+a,x[6]=i*c+n*l+o;break;case"circle":x[4]=yt(x[3],t);break;case"rect":x[4]=yt(x[4],t);break;case"ellipse":x[8]=yt(x[8],t);break;case"roundRect":x[5]=yt(x[5],t);break;case"addPath":x[0].transform(t);break;case"poly":x[2]=yt(x[2],t);break;default:Tt("unknown transform action",y.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(t){let e=this.instructions.length-1,i=this.instructions[e];if(!i)return t.x=0,t.y=0,t;for(;i.action==="closePath";){if(e--,e<0)return t.x=0,t.y=0,t;i=this.instructions[e]}switch(i.action){case"moveTo":case"lineTo":t.x=i.data[0],t.y=i.data[1];break;case"quadraticCurveTo":t.x=i.data[2],t.y=i.data[3];break;case"bezierCurveTo":t.x=i.data[4],t.y=i.data[5];break;case"arc":case"arcToSvg":t.x=i.data[5],t.y=i.data[6];break;case"addPath":i.data[0].getLastPoint(t);break}return t}}function yt(r,t){return r?r.prepend(t):t.clone()}function Gr(r,t){if(typeof r=="string"){const i=document.createElement("div");i.innerHTML=r.trim(),r=i.querySelector("svg")}const e={context:t,path:new ut};return Mi(r,e,null,null),t}function Mi(r,t,e,i){const s=r.children,{fillStyle:n,strokeStyle:a}=Rr(r);n&&e?e={...e,...n}:n&&(e=n),a&&i?i={...i,...a}:a&&(i=a),t.context.fillStyle=e,t.context.strokeStyle=i;let o,c,l,h,u,m,d,g,p,f,y,x,b,_,P,z,v;switch(r.nodeName.toLowerCase()){case"path":_=r.getAttribute("d"),P=new ut(_),t.context.path(P),e&&t.context.fill(),i&&t.context.stroke();break;case"circle":d=W(r,"cx",0),g=W(r,"cy",0),p=W(r,"r",0),t.context.ellipse(d,g,p,p),e&&t.context.fill(),i&&t.context.stroke();break;case"rect":o=W(r,"x",0),c=W(r,"y",0),z=W(r,"width",0),v=W(r,"height",0),f=W(r,"rx",0),y=W(r,"ry",0),f||y?t.context.roundRect(o,c,z,v,f||y):t.context.rect(o,c,z,v),e&&t.context.fill(),i&&t.context.stroke();break;case"ellipse":d=W(r,"cx",0),g=W(r,"cy",0),f=W(r,"rx",0),y=W(r,"ry",0),t.context.beginPath(),t.context.ellipse(d,g,f,y),e&&t.context.fill(),i&&t.context.stroke();break;case"line":l=W(r,"x1",0),h=W(r,"y1",0),u=W(r,"x2",0),m=W(r,"y2",0),t.context.beginPath(),t.context.moveTo(l,h),t.context.lineTo(u,m),i&&t.context.stroke();break;case"polygon":b=r.getAttribute("points"),x=b.match(/\d+/g).map(M=>parseInt(M,10)),t.context.poly(x,!0),e&&t.context.fill(),i&&t.context.stroke();break;case"polyline":b=r.getAttribute("points"),x=b.match(/\d+/g).map(M=>parseInt(M,10)),t.context.poly(x,!1),i&&t.context.stroke();break;case"g":case"svg":break;default:{console.info(`[SVG parser] <${r.nodeName}> elements unsupported`);break}}for(let M=0;M<s.length;M++)Mi(s[M],t,e,i)}function W(r,t,e){const i=r.getAttribute(t);return i?Number(i):e}function Rr(r){const t=r.getAttribute("style"),e={},i={};let s=!1,n=!1;if(t){const a=t.split(";");for(let o=0;o<a.length;o++){const c=a[o],[l,h]=c.split(":");switch(l){case"stroke":h!=="none"&&(e.color=L.shared.setValue(h).toNumber(),n=!0);break;case"stroke-width":e.width=Number(h);break;case"fill":h!=="none"&&(s=!0,i.color=L.shared.setValue(h).toNumber());break;case"fill-opacity":i.alpha=Number(h);break;case"stroke-opacity":e.alpha=Number(h);break;case"opacity":i.alpha=Number(h),e.alpha=Number(h);break}}}else{const a=r.getAttribute("stroke");a&&a!=="none"&&(n=!0,e.color=L.shared.setValue(a).toNumber(),e.width=W(r,"stroke-width",1));const o=r.getAttribute("fill");o&&o!=="none"&&(s=!0,i.color=L.shared.setValue(o).toNumber())}return{strokeStyle:n?e:null,fillStyle:s?i:null}}function Dr(r){return L.isColorLike(r)}function je(r){return r instanceof Lt}function qe(r){return r instanceof Pt}function Wr(r,t,e){const i=L.shared.setValue(t??0);return r.color=i.toNumber(),r.alpha=i.alpha===1?e.alpha:i.alpha,r.texture=N.WHITE,{...e,...r}}function Oe(r,t,e){return r.fill=t,r.color=16777215,r.texture=t.texture,r.matrix=t.transform,{...e,...r}}function Ke(r,t,e){return t.buildLinearGradient(),r.fill=t,r.color=16777215,r.texture=t.texture,r.matrix=t.transform,{...e,...r}}function Lr(r,t){var s;const e={...t,...r};if(e.texture){if(e.texture!==N.WHITE){const a=((s=e.matrix)==null?void 0:s.invert())||new O;a.translate(e.texture.frame.x,e.texture.frame.y),a.scale(1/e.texture.source.width,1/e.texture.source.height),e.matrix=a}const n=e.texture.source.style;n.addressMode==="clamp-to-edge"&&(n.addressMode="repeat",n.update())}const i=L.shared.setValue(e.color);return e.alpha*=i.alpha,e.color=i.toNumber(),e.matrix=e.matrix?e.matrix.clone():null,e}function nt(r,t){if(r==null)return null;const e={},i=r;return Dr(r)?Wr(e,r,t):je(r)?Oe(e,r,t):qe(r)?Ke(e,r,t):i.fill&&je(i.fill)?Oe(i,i.fill,t):i.fill&&qe(i.fill)?Ke(i,i.fill,t):Lr(i,t)}function Dt(r,t){const{width:e,alignment:i,miterLimit:s,cap:n,join:a,...o}=t,c=nt(r,o);return c?{width:e,alignment:i,miterLimit:s,cap:n,join:a,...c}:null}const $r=new lt,Ye=new O,xe=class q extends dt{constructor(){super(...arguments),this.uid=H("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new ut,this._transform=new O,this._fillStyle={...q.defaultFillStyle},this._strokeStyle={...q.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new le,this._boundsDirty=!0}clone(){const t=new q;return t.batchMode=this.batchMode,t.instructions=this.instructions.slice(),t._activePath=this._activePath.clone(),t._transform=this._transform.clone(),t._fillStyle={...this._fillStyle},t._strokeStyle={...this._strokeStyle},t._stateStack=this._stateStack.slice(),t._bounds=this._bounds.clone(),t._boundsDirty=!0,t}get fillStyle(){return this._fillStyle}set fillStyle(t){this._fillStyle=nt(t,q.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){this._strokeStyle=Dt(t,q.defaultStrokeStyle)}setFillStyle(t){return this._fillStyle=nt(t,q.defaultFillStyle),this}setStrokeStyle(t){return this._strokeStyle=nt(t,q.defaultStrokeStyle),this}texture(t,e,i,s,n,a){return this.instructions.push({action:"texture",data:{image:t,dx:i||0,dy:s||0,dw:n||t.frame.width,dh:a||t.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:e?L.shared.setValue(e).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new ut,this}fill(t,e){let i;const s=this.instructions[this.instructions.length-1];return this._tick===0&&s&&s.action==="stroke"?i=s.data.path:i=this._activePath.clone(),i?(t!=null&&(e!==void 0&&typeof t=="number"&&(R(D,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),t={color:t,alpha:e}),this._fillStyle=nt(t,q.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:i}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:t,y:e}=this._activePath.getLastPoint(lt.shared);this._activePath.clear(),this._activePath.moveTo(t,e)}stroke(t){let e;const i=this.instructions[this.instructions.length-1];return this._tick===0&&i&&i.action==="fill"?e=i.data.path:e=this._activePath.clone(),e?(t!=null&&(this._strokeStyle=Dt(t,q.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:e}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let t=0;t<2;t++){const e=this.instructions[this.instructions.length-1-t],i=this._activePath.clone();if(e&&(e.action==="stroke"||e.action==="fill"))if(e.data.hole)e.data.hole.addPath(i);else{e.data.hole=i;break}}return this._initNextPathLocation(),this}arc(t,e,i,s,n,a){this._tick++;const o=this._transform;return this._activePath.arc(o.a*t+o.c*e+o.tx,o.b*t+o.d*e+o.ty,i,s,n,a),this}arcTo(t,e,i,s,n){this._tick++;const a=this._transform;return this._activePath.arcTo(a.a*t+a.c*e+a.tx,a.b*t+a.d*e+a.ty,a.a*i+a.c*s+a.tx,a.b*i+a.d*s+a.ty,n),this}arcToSvg(t,e,i,s,n,a,o){this._tick++;const c=this._transform;return this._activePath.arcToSvg(t,e,i,s,n,c.a*a+c.c*o+c.tx,c.b*a+c.d*o+c.ty),this}bezierCurveTo(t,e,i,s,n,a,o){this._tick++;const c=this._transform;return this._activePath.bezierCurveTo(c.a*t+c.c*e+c.tx,c.b*t+c.d*e+c.ty,c.a*i+c.c*s+c.tx,c.b*i+c.d*s+c.ty,c.a*n+c.c*a+c.tx,c.b*n+c.d*a+c.ty,o),this}closePath(){var t;return this._tick++,(t=this._activePath)==null||t.closePath(),this}ellipse(t,e,i,s){return this._tick++,this._activePath.ellipse(t,e,i,s,this._transform.clone()),this}circle(t,e,i){return this._tick++,this._activePath.circle(t,e,i,this._transform.clone()),this}path(t){return this._tick++,this._activePath.addPath(t,this._transform.clone()),this}lineTo(t,e){this._tick++;const i=this._transform;return this._activePath.lineTo(i.a*t+i.c*e+i.tx,i.b*t+i.d*e+i.ty),this}moveTo(t,e){this._tick++;const i=this._transform,s=this._activePath.instructions,n=i.a*t+i.c*e+i.tx,a=i.b*t+i.d*e+i.ty;return s.length===1&&s[0].action==="moveTo"?(s[0].data[0]=n,s[0].data[1]=a,this):(this._activePath.moveTo(n,a),this)}quadraticCurveTo(t,e,i,s,n){this._tick++;const a=this._transform;return this._activePath.quadraticCurveTo(a.a*t+a.c*e+a.tx,a.b*t+a.d*e+a.ty,a.a*i+a.c*s+a.tx,a.b*i+a.d*s+a.ty,n),this}rect(t,e,i,s){return this._tick++,this._activePath.rect(t,e,i,s,this._transform.clone()),this}roundRect(t,e,i,s,n){return this._tick++,this._activePath.roundRect(t,e,i,s,n,this._transform.clone()),this}poly(t,e){return this._tick++,this._activePath.poly(t,e,this._transform.clone()),this}regularPoly(t,e,i,s,n=0,a){return this._tick++,this._activePath.regularPoly(t,e,i,s,n,a),this}roundPoly(t,e,i,s,n,a){return this._tick++,this._activePath.roundPoly(t,e,i,s,n,a),this}roundShape(t,e,i,s){return this._tick++,this._activePath.roundShape(t,e,i,s),this}filletRect(t,e,i,s,n){return this._tick++,this._activePath.filletRect(t,e,i,s,n),this}chamferRect(t,e,i,s,n,a){return this._tick++,this._activePath.chamferRect(t,e,i,s,n,a),this}star(t,e,i,s,n=0,a=0){return this._tick++,this._activePath.star(t,e,i,s,n,a,this._transform.clone()),this}svg(t){return this._tick++,Gr(t,this),this}restore(){const t=this._stateStack.pop();return t&&(this._transform=t.transform,this._fillStyle=t.fillStyle,this._strokeStyle=t.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(t){return this._transform.rotate(t),this}scale(t,e=t){return this._transform.scale(t,e),this}setTransform(t,e,i,s,n,a){return t instanceof O?(this._transform.set(t.a,t.b,t.c,t.d,t.tx,t.ty),this):(this._transform.set(t,e,i,s,n,a),this)}transform(t,e,i,s,n,a){return t instanceof O?(this._transform.append(t),this):(Ye.set(t,e,i,s,n,a),this._transform.append(Ye),this)}translate(t,e=t){return this._transform.translate(t,e),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;const t=this._bounds;t.clear();for(let e=0;e<this.instructions.length;e++){const i=this.instructions[e],s=i.action;if(s==="fill"){const n=i.data;t.addBounds(n.path.bounds)}else if(s==="texture"){const n=i.data;t.addFrame(n.dx,n.dy,n.dx+n.dw,n.dy+n.dh,n.transform)}if(s==="stroke"){const n=i.data,a=n.style.width/2,o=n.path.bounds;t.addFrame(o.minX-a,o.minY-a,o.maxX+a,o.maxY+a)}}return t}containsPoint(t){var s;if(!this.bounds.containsPoint(t.x,t.y))return!1;const e=this.instructions;let i=!1;for(let n=0;n<e.length;n++){const a=e[n],o=a.data,c=o.path;if(!a.action||!c)continue;const l=o.style,h=c.shapePath.shapePrimitives;for(let u=0;u<h.length;u++){const m=h[u].shape;if(!l||!m)continue;const d=h[u].transform,g=d?d.applyInverse(t,$r):t;a.action==="fill"?i=m.contains(g.x,g.y):i=m.strokeContains(g.x,g.y,l.width);const p=o.hole;if(p){const f=(s=p.shapePath)==null?void 0:s.shapePrimitives;if(f)for(let y=0;y<f.length;y++)f[y].shape.contains(g.x,g.y)&&(i=!1)}if(i)return!0}}return i}destroy(t=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof t=="boolean"?t:t==null?void 0:t.texture){const i=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(i),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(i)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};xe.defaultFillStyle={color:16777215,alpha:1,texture:N.WHITE,matrix:null,fill:null};xe.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:N.WHITE,matrix:null,fill:null};let U=xe;const Xe=["align","breakWords","cssOverrides","fontVariant","fontWeight","leading","letterSpacing","lineHeight","padding","textBaseline","trim","whiteSpace","wordWrap","wordWrapWidth","fontFamily","fontStyle","fontSize"];function Vr(r){const t=[];let e=0;for(let i=0;i<Xe.length;i++){const s=`_${Xe[i]}`;t[e++]=r[s]}return e=Ti(r._fill,t,e),e=Ur(r._stroke,t,e),e=Hr(r.dropShadow,t,e),t.join("-")}function Ti(r,t,e){var i;return r&&(t[e++]=r.color,t[e++]=r.alpha,t[e++]=(i=r.fill)==null?void 0:i.styleKey),e}function Ur(r,t,e){return r&&(e=Ti(r,t,e),t[e++]=r.width,t[e++]=r.alignment,t[e++]=r.cap,t[e++]=r.join,t[e++]=r.miterLimit),e}function Hr(r,t,e){return r&&(t[e++]=r.alpha,t[e++]=r.angle,t[e++]=r.blur,t[e++]=r.distance,t[e++]=L.shared.setValue(r.color).toNumber()),e}const ye=class ht extends dt{constructor(t={}){super(),Nr(t);const e={...ht.defaultTextStyle,...t};for(const i in e){const s=i;this[s]=e[i]}this.update()}get align(){return this._align}set align(t){this._align=t,this.update()}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords=t,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(t){t!==null&&typeof t=="object"?this._dropShadow=this._createProxy({...ht.defaultDropShadow,...t}):this._dropShadow=t?this._createProxy({...ht.defaultDropShadow}):null,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(t){this._fontFamily=t,this.update()}get fontSize(){return this._fontSize}set fontSize(t){typeof t=="string"?this._fontSize=parseInt(t,10):this._fontSize=t,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle=t,this.update()}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant=t,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight=t,this.update()}get leading(){return this._leading}set leading(t){this._leading=t,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing=t,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight=t,this.update()}get padding(){return this._padding}set padding(t){this._padding=t,this.update()}get trim(){return this._trim}set trim(t){this._trim=t,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline=t,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace=t,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap=t,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth=t,this.update()}get fill(){return this._originalFill}set fill(t){t!==this._originalFill&&(this._originalFill=t,this._isFillStyle(t)&&(this._originalFill=this._createProxy({...U.defaultFillStyle,...t},()=>{this._fill=nt({...this._originalFill},U.defaultFillStyle)})),this._fill=nt(t===0?"black":t,U.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(t){t!==this._originalStroke&&(this._originalStroke=t,this._isFillStyle(t)&&(this._originalStroke=this._createProxy({...U.defaultStrokeStyle,...t},()=>{this._stroke=Dt({...this._originalStroke},U.defaultStrokeStyle)})),this._stroke=Dt(t,U.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=Vr(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}reset(){const t=ht.defaultTextStyle;for(const e in t)this[e]=t[e]}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new ht({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth})}destroy(t=!1){var i,s,n,a;if(this.removeAllListeners(),typeof t=="boolean"?t:t==null?void 0:t.texture){const o=typeof t=="boolean"?t:t==null?void 0:t.textureSource;(i=this._fill)!=null&&i.texture&&this._fill.texture.destroy(o),(s=this._originalFill)!=null&&s.texture&&this._originalFill.texture.destroy(o),(n=this._stroke)!=null&&n.texture&&this._stroke.texture.destroy(o),(a=this._originalStroke)!=null&&a.texture&&this._originalStroke.texture.destroy(o)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(t,e){return new Proxy(t,{set:(i,s,n)=>(i[s]=n,e==null||e(s,n),this.update(),!0)})}_isFillStyle(t){return(t??null)!==null&&!(L.isColorLike(t)||t instanceof Pt||t instanceof Lt)}};ye.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};ye.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let Mt=ye;function Nr(r){const t=r;if(typeof t.dropShadow=="boolean"&&t.dropShadow){const e=Mt.defaultDropShadow;r.dropShadow={alpha:t.dropShadowAlpha??e.alpha,angle:t.dropShadowAngle??e.angle,blur:t.dropShadowBlur??e.blur,color:t.dropShadowColor??e.color,distance:t.dropShadowDistance??e.distance}}if(t.strokeThickness!==void 0){R(D,"strokeThickness is now a part of stroke");const e=t.stroke;let i={};if(L.isColorLike(e))i.color=e;else if(e instanceof Pt||e instanceof Lt)i.fill=e;else if(Object.hasOwnProperty.call(e,"color")||Object.hasOwnProperty.call(e,"fill"))i=e;else throw new Error("Invalid stroke value.");r.stroke={...i,width:t.strokeThickness}}if(Array.isArray(t.fillGradientStops)){R(D,"gradient fill is now a fill pattern: `new FillGradient(...)`");let e;r.fontSize==null?r.fontSize=Mt.defaultTextStyle.fontSize:typeof r.fontSize=="string"?e=parseInt(r.fontSize,10):e=r.fontSize;const i=new Pt(0,0,0,e*1.7),s=t.fillGradientStops.map(n=>L.shared.setValue(n).toNumber());s.forEach((n,a)=>{const o=a/(s.length-1);i.addColorStop(o,n)}),r.fill={fill:i}}}class jr{constructor(t){this._canvasPool=Object.create(null),this.canvasOptions=t||{},this.enableFullScreen=!1}_createCanvasAndContext(t,e){const i=ct.get().createCanvas();i.width=t,i.height=e;const s=i.getContext("2d");return{canvas:i,context:s}}getOptimalCanvasAndContext(t,e,i=1){t=Math.ceil(t*i-1e-6),e=Math.ceil(e*i-1e-6),t=Ce(t),e=Ce(e);const s=(t<<17)+(e<<1);this._canvasPool[s]||(this._canvasPool[s]=[]);let n=this._canvasPool[s].pop();return n||(n=this._createCanvasAndContext(t,e)),n}returnCanvasAndContext(t){const e=t.canvas,{width:i,height:s}=e,n=(i<<17)+(s<<1);this._canvasPool[n].push(t)}clear(){this._canvasPool={}}}const Qe=new jr,qr=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function he(r){const t=typeof r.fontSize=="number"?`${r.fontSize}px`:r.fontSize;let e=r.fontFamily;Array.isArray(r.fontFamily)||(e=r.fontFamily.split(","));for(let i=e.length-1;i>=0;i--){let s=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(s)&&!qr.includes(s)&&(s=`"${s}"`),e[i]=s}return`${r.fontStyle} ${r.fontVariant} ${r.fontWeight} ${t} ${e.join(",")}`}const te={willReadFrequently:!0},j=class C{static get experimentalLetterSpacingSupported(){let t=C._experimentalLetterSpacingSupported;if(t!==void 0){const e=ct.get().getCanvasRenderingContext2D().prototype;t=C._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e}return t}constructor(t,e,i,s,n,a,o,c,l){this.text=t,this.style=e,this.width=i,this.height=s,this.lines=n,this.lineWidths=a,this.lineHeight=o,this.maxLineWidth=c,this.fontProperties=l}static measureText(t=" ",e,i=C._canvas,s=e.wordWrap){var x;const n=`${t}:${e.styleKey}`;if(C._measurementCache[n])return C._measurementCache[n];const a=he(e),o=C.measureFont(a);o.fontSize===0&&(o.fontSize=e.fontSize,o.ascent=e.fontSize);const c=C.__context;c.font=a;const h=(s?C._wordWrap(t,e,i):t).split(/(?:\r\n|\r|\n)/),u=new Array(h.length);let m=0;for(let b=0;b<h.length;b++){const _=C._measureText(h[b],e.letterSpacing,c);u[b]=_,m=Math.max(m,_)}const d=((x=e._stroke)==null?void 0:x.width)||0;let g=m+d;e.dropShadow&&(g+=e.dropShadow.distance);const p=e.lineHeight||o.fontSize;let f=Math.max(p,o.fontSize+d)+(h.length-1)*(p+e.leading);return e.dropShadow&&(f+=e.dropShadow.distance),new C(t,e,g,f,h,u,p+e.leading,m,o)}static _measureText(t,e,i){let s=!1;C.experimentalLetterSpacingSupported&&(C.experimentalLetterSpacing?(i.letterSpacing=`${e}px`,i.textLetterSpacing=`${e}px`,s=!0):(i.letterSpacing="0px",i.textLetterSpacing="0px"));let n=i.measureText(t).width;return n>0&&(s?n-=e:n+=(C.graphemeSegmenter(t).length-1)*e),n}static _wordWrap(t,e,i=C._canvas){const s=i.getContext("2d",te);let n=0,a="",o="";const c=Object.create(null),{letterSpacing:l,whiteSpace:h}=e,u=C._collapseSpaces(h),m=C._collapseNewlines(h);let d=!u;const g=e.wordWrapWidth+l,p=C._tokenize(t);for(let f=0;f<p.length;f++){let y=p[f];if(C._isNewline(y)){if(!m){o+=C._addLine(a),d=!u,a="",n=0;continue}y=" "}if(u){const b=C.isBreakingSpace(y),_=C.isBreakingSpace(a[a.length-1]);if(b&&_)continue}const x=C._getFromCache(y,l,c,s);if(x>g)if(a!==""&&(o+=C._addLine(a),a="",n=0),C.canBreakWords(y,e.breakWords)){const b=C.wordWrapSplit(y);for(let _=0;_<b.length;_++){let P=b[_],z=P,v=1;for(;b[_+v];){const S=b[_+v];if(!C.canBreakChars(z,S,y,_,e.breakWords))P+=S;else break;z=S,v++}_+=v-1;const M=C._getFromCache(P,l,c,s);M+n>g&&(o+=C._addLine(a),d=!1,a="",n=0),a+=P,n+=M}}else{a.length>0&&(o+=C._addLine(a),a="",n=0);const b=f===p.length-1;o+=C._addLine(y,!b),d=!1,a="",n=0}else x+n>g&&(d=!1,o+=C._addLine(a),a="",n=0),(a.length>0||!C.isBreakingSpace(y)||d)&&(a+=y,n+=x)}return o+=C._addLine(a,!1),o}static _addLine(t,e=!0){return t=C._trimRight(t),t=e?`${t}
`:t,t}static _getFromCache(t,e,i,s){let n=i[t];return typeof n!="number"&&(n=C._measureText(t,e,s)+e,i[t]=n),n}static _collapseSpaces(t){return t==="normal"||t==="pre-line"}static _collapseNewlines(t){return t==="normal"}static _trimRight(t){if(typeof t!="string")return"";for(let e=t.length-1;e>=0;e--){const i=t[e];if(!C.isBreakingSpace(i))break;t=t.slice(0,-1)}return t}static _isNewline(t){return typeof t!="string"?!1:C._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return typeof t!="string"?!1:C._breakingSpaces.includes(t.charCodeAt(0))}static _tokenize(t){const e=[];let i="";if(typeof t!="string")return e;for(let s=0;s<t.length;s++){const n=t[s],a=t[s+1];if(C.isBreakingSpace(n,a)||C._isNewline(n)){i!==""&&(e.push(i),i=""),e.push(n);continue}i+=n}return i!==""&&e.push(i),e}static canBreakWords(t,e){return e}static canBreakChars(t,e,i,s,n){return!0}static wordWrapSplit(t){return C.graphemeSegmenter(t)}static measureFont(t){if(C._fonts[t])return C._fonts[t];const e=C._context;e.font=t;const i=e.measureText(C.METRICS_STRING+C.BASELINE_SYMBOL),s={ascent:i.actualBoundingBoxAscent,descent:i.actualBoundingBoxDescent,fontSize:i.actualBoundingBoxAscent+i.actualBoundingBoxDescent};return C._fonts[t]=s,s}static clearMetrics(t=""){t?delete C._fonts[t]:C._fonts={}}static get _canvas(){if(!C.__canvas){let t;try{const e=new OffscreenCanvas(0,0),i=e.getContext("2d",te);if(i!=null&&i.measureText)return C.__canvas=e,e;t=ct.get().createCanvas()}catch{t=ct.get().createCanvas()}t.width=t.height=10,C.__canvas=t}return C.__canvas}static get _context(){return C.__context||(C.__context=C._canvas.getContext("2d",te)),C.__context}};j.METRICS_STRING="|ÉqÅ";j.BASELINE_SYMBOL="M";j.BASELINE_MULTIPLIER=1.4;j.HEIGHT_MULTIPLIER=2;j.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const r=new Intl.Segmenter;return t=>[...r.segment(t)].map(e=>e.segment)}return r=>[...r]})();j.experimentalLetterSpacing=!1;j._fonts={};j._newlines=[10,13];j._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];j._measurementCache={};let Ze=j;function Je(r,t){if(r.texture===N.WHITE&&!r.fill)return L.shared.setValue(r.color).setAlpha(r.alpha??1).toHexa();if(r.fill){if(r.fill instanceof Lt){const e=r.fill,i=t.createPattern(e.texture.source.resource,"repeat"),s=e.transform.copyTo(O.shared);return s.scale(e.texture.frame.width,e.texture.frame.height),i.setTransform(s),i}else if(r.fill instanceof Pt){const e=r.fill;if(e.type==="linear"){const i=t.createLinearGradient(e.x0,e.y0,e.x1,e.y1);return e.gradientStops.forEach(s=>{i.addColorStop(s.offset,L.shared.setValue(s.color).toHex())}),i}}}else{const e=t.createPattern(r.texture.source.resource,"repeat"),i=r.matrix.copyTo(O.shared);return i.scale(r.texture.frame.width,r.texture.frame.height),e.setTransform(i),e}return Tt("FillStyle not recognised",r),"red"}function ki(r){if(r==="")return[];typeof r=="string"&&(r=[r]);const t=[];for(let e=0,i=r.length;e<i;e++){const s=r[e];if(Array.isArray(s)){if(s.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${s.length}.`);if(s[0].length===0||s[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const n=s[0].charCodeAt(0),a=s[1].charCodeAt(0);if(a<n)throw new Error("[BitmapFont]: Invalid character range.");for(let o=n,c=a;o<=c;o++)t.push(String.fromCharCode(o))}else t.push(...Array.from(s))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}const Ai=class Ii extends es{constructor(t){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentPageIndex=-1,this._skipKerning=!1;const e={...Ii.defaultOptions,...t};this._textureSize=e.textureSize,this._mipmap=e.mipmap;const i=e.style.clone();e.overrideFill&&(i._fill.color=16777215,i._fill.alpha=1,i._fill.texture=N.WHITE,i._fill.fill=null),this.applyFillAsTint=e.overrideFill;const s=i.fontSize;i.fontSize=this.baseMeasurementFontSize;const n=he(i);e.overrideSize?i._stroke&&(i._stroke.width*=this.baseRenderedFontSize/s):i.fontSize=this.baseRenderedFontSize=s,this._style=i,this._skipKerning=e.skipKerning??!1,this.resolution=e.resolution??1,this._padding=e.padding??4,this.fontMetrics=Ze.measureFont(n),this.lineHeight=i.lineHeight||this.fontMetrics.fontSize||i.fontSize}ensureCharacters(t){var p,f;const e=ki(t).filter(y=>!this._currentChars.includes(y)).filter((y,x,b)=>b.indexOf(y)===x);if(!e.length)return;this._currentChars=[...this._currentChars,...e];let i;this._currentPageIndex===-1?i=this._nextPage():i=this.pages[this._currentPageIndex];let{canvas:s,context:n}=i.canvasAndContext,a=i.texture.source;const o=this._style;let c=this._currentX,l=this._currentY;const h=this.baseRenderedFontSize/this.baseMeasurementFontSize,u=this._padding*h,m=o.fontStyle==="italic"?2:1;let d=0,g=!1;for(let y=0;y<e.length;y++){const x=e[y],b=Ze.measureText(x,o,s,!1);b.lineHeight=b.height;const _=m*b.width*h,P=b.height*h,z=_+u*2,v=P+u*2;if(g=!1,x!==`
`&&x!=="\r"&&x!=="	"&&x!==" "&&(g=!0,d=Math.ceil(Math.max(v,d))),c+z>this._textureSize&&(l+=d,d=v,c=0,l+d>this._textureSize)){a.update();const S=this._nextPage();s=S.canvasAndContext.canvas,n=S.canvasAndContext.context,a=S.texture.source,l=0}const M=_/h-(((p=o.dropShadow)==null?void 0:p.distance)??0)-(((f=o._stroke)==null?void 0:f.width)??0);if(this.chars[x]={id:x.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:M,kerning:{}},g){this._drawGlyph(n,b,c+u,l+u,h,o);const S=a.width*h,w=a.height*h,E=new J(c/S*a.width,l/w*a.height,z/S*a.width,v/w*a.height);this.chars[x].texture=new N({source:a,frame:E}),c+=Math.ceil(z)}}a.update(),this._currentX=c,this._currentY=l,this._skipKerning&&this._applyKerning(e,n)}get pageTextures(){return R(D,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(t,e){const i=this._measureCache;for(let s=0;s<t.length;s++){const n=t[s];for(let a=0;a<this._currentChars.length;a++){const o=this._currentChars[a];let c=i[n];c||(c=i[n]=e.measureText(n).width);let l=i[o];l||(l=i[o]=e.measureText(o).width);let h=e.measureText(n+o).width,u=h-(c+l);u&&(this.chars[n].kerning[o]=u),h=e.measureText(n+o).width,u=h-(c+l),u&&(this.chars[o].kerning[n]=u)}}}_nextPage(){this._currentPageIndex++;const t=this.resolution,e=Qe.getOptimalCanvasAndContext(this._textureSize,this._textureSize,t);this._setupContext(e.context,this._style,t);const i=t*(this.baseRenderedFontSize/this.baseMeasurementFontSize),s=new N({source:new ei({resource:e.canvas,resolution:i,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})}),n={canvasAndContext:e,texture:s};return this.pages[this._currentPageIndex]=n,n}_setupContext(t,e,i){e.fontSize=this.baseRenderedFontSize,t.scale(i,i),t.font=he(e),e.fontSize=this.baseMeasurementFontSize,t.textBaseline=e.textBaseline;const s=e._stroke,n=(s==null?void 0:s.width)??0;if(s&&(t.lineWidth=n,t.lineJoin=s.join,t.miterLimit=s.miterLimit,t.strokeStyle=Je(s,t)),e._fill&&(t.fillStyle=Je(e._fill,t)),e.dropShadow){const a=e.dropShadow,o=L.shared.setValue(a.color).toArray(),c=a.blur*i,l=a.distance*i;t.shadowColor=`rgba(${o[0]*255},${o[1]*255},${o[2]*255},${a.alpha})`,t.shadowBlur=c,t.shadowOffsetX=Math.cos(a.angle)*l,t.shadowOffsetY=Math.sin(a.angle)*l}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}_drawGlyph(t,e,i,s,n,a){const o=e.text,c=e.fontProperties,l=a._stroke,h=((l==null?void 0:l.width)??0)*n,u=i+h/2,m=s-h/2,d=c.descent*n,g=e.lineHeight*n;a.stroke&&h&&t.strokeText(o,u,m+g-d),a._fill&&t.fillText(o,u,m+g-d)}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{canvasAndContext:e,texture:i}=this.pages[t];e.canvas.width=e.canvas.width,Qe.returnCanvasAndContext(e),i.destroy(!0)}this.pages=null}};Ai.defaultOptions={textureSize:512,style:new Mt,mipmap:!0};let ti=Ai;function Or(r,t,e,i){const s={width:0,height:0,offsetY:0,scale:t.fontSize/e.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};s.offsetY=e.baseLineOffset;let n=s.lines[0],a=null,o=!0;const c={spaceWord:!1,width:0,start:0,index:0,positions:[],chars:[]},l=g=>{const p=n.width;for(let f=0;f<c.index;f++){const y=g.positions[f];n.chars.push(g.chars[f]),n.charPositions.push(y+p)}n.width+=g.width,o=!1,c.width=0,c.index=0,c.chars.length=0},h=()=>{let g=n.chars.length-1;if(i){let p=n.chars[g];for(;p===" ";)n.width-=e.chars[p].xAdvance,p=n.chars[--g]}s.width=Math.max(s.width,n.width),n={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},o=!0,s.lines.push(n),s.height+=e.lineHeight},u=e.baseMeasurementFontSize/t.fontSize,m=t.letterSpacing*u,d=t.wordWrapWidth*u;for(let g=0;g<r.length+1;g++){let p;const f=g===r.length;f||(p=r[g]);const y=e.chars[p]||e.chars[" "];if(/(?:\s)/.test(p)||p==="\r"||p===`
`||f){if(!o&&t.wordWrap&&n.width+c.width-m>d?(h(),l(c),f||n.charPositions.push(0)):(c.start=n.width,l(c),f||n.charPositions.push(0)),p==="\r"||p===`
`)n.width!==0&&h();else if(!f){const P=y.xAdvance+(y.kerning[a]||0)+m;n.width+=P,n.spaceWidth=P,n.spacesIndex.push(n.charPositions.length),n.chars.push(p)}}else{const _=y.kerning[a]||0,P=y.xAdvance+_+m;c.positions[c.index++]=c.width+_,c.chars.push(p),c.width+=P}a=p}return h(),t.align==="center"?Kr(s):t.align==="right"?Yr(s):t.align==="justify"&&Xr(s),s}function Kr(r){for(let t=0;t<r.lines.length;t++){const e=r.lines[t],i=r.width/2-e.width/2;for(let s=0;s<e.charPositions.length;s++)e.charPositions[s]+=i}}function Yr(r){for(let t=0;t<r.lines.length;t++){const e=r.lines[t],i=r.width-e.width;for(let s=0;s<e.charPositions.length;s++)e.charPositions[s]+=i}}function Xr(r){const t=r.width;for(let e=0;e<r.lines.length;e++){const i=r.lines[e];let s=0,n=i.spacesIndex[s++],a=0;const o=i.spacesIndex.length,l=(t-i.width)/o;for(let h=0;h<i.charPositions.length;h++)h===n&&(n=i.spacesIndex[s++],a+=l),i.charPositions[h]+=a}}let Et=0;class Qr{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1}}getFont(t,e){var a;let i=`${e.fontFamily}-bitmap`,s=!0;if(e._fill.fill&&!e._stroke)i+=e._fill.fill.styleKey,s=!1;else if(e._stroke||e.dropShadow){let o=e.styleKey;o=o.substring(0,o.lastIndexOf("-")),i=`${o}-bitmap`,s=!1}if(!Q.has(i)){const o=new ti({style:e,overrideFill:s,overrideSize:!0,...this.defaultOptions});Et++,Et>50&&Tt("BitmapText",`You have dynamically created ${Et} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),o.once("destroy",()=>{Et--,Q.remove(i)}),Q.set(i,o)}const n=Q.get(i);return(a=n.ensureCharacters)==null||a.call(n,t),n}getLayout(t,e,i=!0){const s=this.getFont(t,e);return Or([...t],e,s,i)}measureText(t,e,i=!0){return this.getLayout(t,e,i)}install(...t){var l,h,u,m;let e=t[0];typeof e=="string"&&(e={name:e,style:t[1],chars:(l=t[2])==null?void 0:l.chars,resolution:(h=t[2])==null?void 0:h.resolution,padding:(u=t[2])==null?void 0:u.padding,skipKerning:(m=t[2])==null?void 0:m.skipKerning},R(D,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const i=e==null?void 0:e.name;if(!i)throw new Error("[BitmapFontManager] Property `name` is required.");e={...this.defaultOptions,...e};const s=e.style,n=s instanceof Mt?s:new Mt(s),a=n._fill.fill!==null&&n._fill.fill!==void 0,o=new ti({style:n,overrideFill:a,skipKerning:e.skipKerning,padding:e.padding,resolution:e.resolution,overrideSize:!1}),c=ki(e.chars);return o.ensureCharacters(c.join("")),Q.set(`${i}-bitmap`,o),o.once("destroy",()=>Q.remove(`${i}-bitmap`)),o}uninstall(t){const e=`${t}-bitmap`,i=Q.get(e);i&&(Q.remove(e),i.destroy())}}const tn=new Qr;class ce extends Wi{constructor(t){t instanceof U&&(t={context:t});const{context:e,roundPixels:i,...s}=t||{};super({label:"Graphics",...s}),this.renderPipeId="graphics",e?this._context=e:this._context=this._ownedContext=new U,this._context.on("update",this.onViewUpdate,this),this.allowChildren=!1,this.roundPixels=i??!1}set context(t){t!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=t,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}addBounds(t){t.addBounds(this._context.bounds)}containsPoint(t){return this._context.containsPoint(t)}onViewUpdate(){if(this._didViewChangeTick++,this._didGraphicsUpdate=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const t=this.renderGroup||this.parentRenderGroup;t&&t.onChildViewUpdate(this)}destroy(t){this._ownedContext&&!t?this._ownedContext.destroy(t):(t===!0||(t==null?void 0:t.context)===!0)&&this._context.destroy(t),this._ownedContext=null,this._context=null,super.destroy(t)}_callContextMethod(t,e){return this.context[t](...e),this}setFillStyle(...t){return this._callContextMethod("setFillStyle",t)}setStrokeStyle(...t){return this._callContextMethod("setStrokeStyle",t)}fill(...t){return this._callContextMethod("fill",t)}stroke(...t){return this._callContextMethod("stroke",t)}texture(...t){return this._callContextMethod("texture",t)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...t){return this._callContextMethod("arc",t)}arcTo(...t){return this._callContextMethod("arcTo",t)}arcToSvg(...t){return this._callContextMethod("arcToSvg",t)}bezierCurveTo(...t){return this._callContextMethod("bezierCurveTo",t)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...t){return this._callContextMethod("ellipse",t)}circle(...t){return this._callContextMethod("circle",t)}path(...t){return this._callContextMethod("path",t)}lineTo(...t){return this._callContextMethod("lineTo",t)}moveTo(...t){return this._callContextMethod("moveTo",t)}quadraticCurveTo(...t){return this._callContextMethod("quadraticCurveTo",t)}rect(...t){return this._callContextMethod("rect",t)}roundRect(...t){return this._callContextMethod("roundRect",t)}poly(...t){return this._callContextMethod("poly",t)}regularPoly(...t){return this._callContextMethod("regularPoly",t)}roundPoly(...t){return this._callContextMethod("roundPoly",t)}roundShape(...t){return this._callContextMethod("roundShape",t)}filletRect(...t){return this._callContextMethod("filletRect",t)}chamferRect(...t){return this._callContextMethod("chamferRect",t)}star(...t){return this._callContextMethod("star",t)}svg(...t){return this._callContextMethod("svg",t)}restore(...t){return this._callContextMethod("restore",t)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...t){return this._callContextMethod("rotate",t)}scaleTransform(...t){return this._callContextMethod("scale",t)}setTransform(...t){return this._callContextMethod("setTransform",t)}transform(...t){return this._callContextMethod("transform",t)}translateTransform(...t){return this._callContextMethod("translate",t)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(t){this._context.fillStyle=t}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(t){this._context.strokeStyle=t}clone(t=!1){return t?new ce(this._context.clone()):(this._ownedContext=null,new ce(this._context))}lineStyle(t,e,i){R(D,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const s={};return t&&(s.width=t),e&&(s.color=e),i&&(s.alpha=i),this.context.strokeStyle=s,this}beginFill(t,e){R(D,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const i={};return t&&(i.color=t),e&&(i.alpha=e),this.context.fillStyle=i,this}endFill(){R(D,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const t=this.context.strokeStyle;return(t.width!==U.defaultStrokeStyle.width||t.color!==U.defaultStrokeStyle.color||t.alpha!==U.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...t){return R(D,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",t)}drawEllipse(...t){return R(D,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",t)}drawPolygon(...t){return R(D,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",t)}drawRect(...t){return R(D,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",t)}drawRoundedRect(...t){return R(D,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",t)}drawStar(...t){return R(D,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",t)}}export{es as A,$ as B,Qe as C,Js as D,Or as E,Pt as F,Wt as G,he as H,Je as I,Pi as J,ie as R,ms as S,Mt as T,ci as U,Ct as a,Gt as b,ue as c,$s as d,Us as e,Ae as f,fs as g,qs as h,ui as i,de as j,ni as k,Oi as l,ws as m,Vs as n,Hs as o,Ks as p,Xs as q,Ys as r,Qs as s,tn as t,U as u,Ze as v,ce as w,Vr as x,Si as y,Ie as z};
